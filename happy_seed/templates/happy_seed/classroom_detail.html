{% extends 'base.html' %}

{% block content %}
<section class="pt-32 pb-20 px-4 min-h-screen">
    <div class="max-w-6xl mx-auto">

        <div class="flex items-center justify-between mb-6">
            <div>
                <a href="{% url 'happy_seed:dashboard' %}" class="text-sm text-gray-400 hover:text-gray-600">&larr; êµì‹¤ ëª©ë¡</a>
                <h1 class="text-2xl md:text-3xl font-bold text-gray-800 mt-1">ğŸŒ± {{ classroom.name }}</h1>
                {% if classroom.school_name %}<p class="text-sm text-gray-400">{{ classroom.school_name }}</p>{% endif %}
            </div>
            <div class="flex gap-2">
                <a href="{% url 'happy_seed:teacher_manual' %}" class="px-4 py-2 bg-gray-100 text-gray-600 rounded-xl text-sm font-bold hover:bg-gray-200 transition-colors">êµì‚¬ìš© ì„¤ëª…ì„œ</a>
                <a href="{% url 'happy_seed:classroom_settings' classroom_id=classroom.id %}" class="px-4 py-2 bg-gray-100 text-gray-600 rounded-xl text-sm font-bold hover:bg-gray-200 transition-colors">ì„¤ì •</a>
                <a href="{% url 'happy_seed:prize_manage' classroom_id=classroom.id %}" class="px-4 py-2 bg-gray-100 text-gray-600 rounded-xl text-sm font-bold hover:bg-gray-200 transition-colors">ë³´ìƒ</a>
                <a href="{% url 'happy_seed:group_manage' classroom_id=classroom.id %}" class="px-4 py-2 bg-gray-100 text-gray-600 rounded-xl text-sm font-bold hover:bg-gray-200 transition-colors">ëª¨ë‘ </a>
                <a href="{% url 'happy_seed:consent_manage' classroom_id=classroom.id %}" class="px-4 py-2 bg-gray-100 text-gray-600 rounded-xl text-sm font-bold hover:bg-gray-200 transition-colors">ë™ì˜</a>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-6">
            <a href="{% url 'happy_seed:bloom_run' classroom_id=classroom.id %}" class="clay-card p-4 rounded-xl text-center hover:bg-white transition-all">
                <div class="text-2xl mb-1">ğŸŒ¸</div>
                <div class="text-sm font-bold text-gray-700">ê½ƒí”¼ì›€ ì¶”ì²¨</div>
            </a>
            <a href="{% url 'happy_seed:activity_manage' classroom_id=classroom.id %}" class="clay-card p-4 rounded-xl text-center hover:bg-white transition-all">
                <div class="text-2xl mb-1">ğŸ“</div>
                <div class="text-sm font-bold text-gray-700">í™œë™ ìš´ì˜</div>
            </a>
            <a href="{% url 'happy_seed:student_bulk_add' classroom_id=classroom.id %}" class="clay-card p-4 rounded-xl text-center hover:bg-white transition-all">
                <div class="text-2xl mb-1">ğŸ‘¥</div>
                <div class="text-sm font-bold text-gray-700">í•™ìƒ ì¼ê´„ ì¶”ê°€</div>
            </a>
            <a href="{% url 'happy_seed:garden_public' slug=classroom.slug %}" target="_blank" rel="noopener noreferrer" class="clay-card p-4 rounded-xl text-center hover:bg-white transition-all">
                <div class="text-2xl mb-1">ğŸ¡</div>
                <div class="text-sm font-bold text-gray-700">ê³µê°œ ê½ƒë°­</div>
            </a>
            <a href="{% url 'happy_seed:analysis_dashboard' classroom_id=classroom.id %}" class="clay-card p-4 rounded-xl text-center hover:bg-white transition-all">
                <div class="text-2xl mb-1">ğŸ“Š</div>
                <div class="text-sm font-bold text-gray-700">ë¶„ì„</div>
            </a>
        </div>

        <!-- Student Add Form -->
        <div class="clay-card p-4 rounded-xl mb-6" x-data="{ showAdd: false }">
            <div class="flex items-center justify-between">
                <h2 class="font-bold text-gray-700">í•™ìƒ ëª©ë¡</h2>
                <button @click="showAdd = !showAdd" class="px-3 py-1.5 bg-green-500 text-white rounded-lg text-sm font-bold hover:bg-green-600 transition-colors">
                    + í•™ìƒ ì¶”ê°€
                </button>
            </div>
            <div x-show="showAdd" x-transition class="mt-4 p-4 bg-gray-50 rounded-xl">
                <form hx-post="{% url 'happy_seed:student_add' classroom_id=classroom.id %}" hx-target="#student-grid" hx-swap="innerHTML" class="flex gap-3 items-end">
                    {% csrf_token %}
                    <div class="flex-1">
                        <label class="block text-xs font-bold text-gray-500 mb-1">ë²ˆí˜¸</label>
                        <input type="number" name="number" min="0" value="0" class="w-full px-3 py-2 rounded-lg border border-gray-200 text-sm">
                    </div>
                    <div class="flex-[2]">
                        <label class="block text-xs font-bold text-gray-500 mb-1">ì´ë¦„</label>
                        <input type="text" name="name" required class="w-full px-3 py-2 rounded-lg border border-gray-200 text-sm" placeholder="í•™ìƒ ì´ë¦„">
                    </div>
                    <button type="submit" class="px-4 py-2 bg-green-500 text-white rounded-lg text-sm font-bold hover:bg-green-600 transition-colors">ì¶”ê°€</button>
                </form>
            </div>
        </div>

        <!-- Student Grid -->
        <div id="student-grid">
            {% include 'happy_seed/partials/student_grid.html' %}
        </div>

    </div>
</section>
{% endblock %}

