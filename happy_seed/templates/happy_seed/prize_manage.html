{% extends 'base.html' %}

{% block content %}
<section class="pt-32 pb-20 px-4 min-h-screen">
    <div class="max-w-4xl mx-auto">

        <div class="mb-8">
            <a href="{% url 'happy_seed:classroom_detail' classroom_id=classroom.id %}" class="text-sm text-gray-400 hover:text-gray-600">&larr; {{ classroom.name }}</a>
        </div>

        <h1 class="text-2xl font-bold text-gray-800 mb-6">ğŸ ë³´ìƒ ê´€ë¦¬</h1>

        <!-- Add Prize Form -->
        <div class="clay-card p-6 rounded-2xl mb-6">
            <h2 class="font-bold text-gray-700 mb-4">ìƒˆ ë³´ìƒ ì¶”ê°€</h2>
            <form method="post" class="space-y-4">
                {% csrf_token %}
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-1">ë³´ìƒ ì´ë¦„ *</label>
                        {{ form.name }}
                    </div>
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-1">ë³´ìƒ ì„ íƒ í™•ë¥  (%)</label>
                        {{ form.win_rate_percent }}
                        <p class="text-xs text-gray-400 mt-1">ë‹¹ì²¨ ì‹œ ì´ ë³´ìƒì´ ì„ íƒë˜ëŠ” ìƒëŒ€ í™•ë¥ ì…ë‹ˆë‹¤. í•©ê³„ 100ì´ ì•„ë‹ˆì–´ë„ ë¹„ìœ¨ëŒ€ë¡œ ë™ì‘í•©ë‹ˆë‹¤.</p>
                    </div>
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-1">ìˆ˜ëŸ‰ (ë¹„ìš°ë©´ ë¬´ì œí•œ)</label>
                        {{ form.total_quantity }}
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-1">ì„¤ëª…</label>
                    {{ form.description }}
                </div>
                <button type="submit" class="px-6 py-2.5 bg-green-500 text-white rounded-xl font-bold text-sm hover:bg-green-600 transition-colors">
                    ë³´ìƒ ì¶”ê°€
                </button>
            </form>
        </div>

        <!-- Prize List -->
        {% if prizes %}
        <div class="clay-card rounded-2xl overflow-hidden">
            <table class="w-full">
                <thead>
                    <tr class="bg-gray-50 text-left text-xs font-bold text-gray-500 uppercase">
                        <th class="px-4 py-3">ë³´ìƒ</th>
                        <th class="px-4 py-3">ì„¤ëª…</th>
                        <th class="px-4 py-3">ì„ íƒ í™•ë¥ (%)</th>
                        <th class="px-4 py-3">ìˆ˜ëŸ‰</th>
                        <th class="px-4 py-3">ìƒíƒœ</th>
                    </tr>
                </thead>
                <tbody>
                    {% for prize in prizes %}
                    <tr class="border-t border-gray-100">
                        <td class="px-4 py-3 font-bold text-gray-800">{{ prize.name }}</td>
                        <td class="px-4 py-3 text-sm text-gray-500">{{ prize.description|default:"-" }}</td>
                        <td class="px-4 py-3 text-sm">{{ prize.win_rate_percent }}%</td>
                        <td class="px-4 py-3 text-sm">{% if prize.total_quantity is not None %}{{ prize.remaining_quantity }}/{{ prize.total_quantity }}{% else %}ë¬´ì œí•œ{% endif %}</td>
                        <td class="px-4 py-3">
                            {% if prize.is_available %}<span class="text-xs px-2 py-1 bg-green-100 text-green-700 rounded-full">ì‚¬ìš©ê°€ëŠ¥</span>{% else %}<span class="text-xs px-2 py-1 bg-red-100 text-red-700 rounded-full">ì†Œì§„</span>{% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <div class="clay-card p-8 rounded-2xl text-center">
            <p class="text-gray-500">ë“±ë¡ëœ ë³´ìƒì´ ì—†ìŠµë‹ˆë‹¤. ìœ„ì—ì„œ ë³´ìƒì„ ì¶”ê°€í•´ì£¼ì„¸ìš”.</p>
        </div>
        {% endif %}

    </div>
</section>
{% endblock %}
