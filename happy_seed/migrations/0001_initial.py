# Generated by Django 6.0.1 on 2026-02-17 14:00

import django.db.models.deletion
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='HSClassroom',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=100, verbose_name='í•™ê¸‰ ì´ë¦„')),
                ('school_name', models.CharField(blank=True, max_length=100, verbose_name='í•™êµëª…')),
                ('slug', models.SlugField(unique=True, verbose_name='ê³µê°œ ì •ì› ìŠ¬ëŸ¬ê·¸')),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('teacher', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='hs_classrooms', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'êµì‹¤',
                'verbose_name_plural': 'êµì‹¤ ëª©ë¡',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='HSBehaviorCategory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('code', models.CharField(max_length=20, verbose_name='ì½”ë“œ')),
                ('name', models.CharField(max_length=50, verbose_name='ì´ë¦„')),
                ('icon', models.CharField(default='ğŸŒ±', max_length=10, verbose_name='ì•„ì´ì½˜')),
                ('seeds_reward', models.IntegerField(default=1, verbose_name='ì”¨ì•— ë³´ìƒ')),
                ('is_active', models.BooleanField(default=True)),
                ('display_order', models.IntegerField(default=0, verbose_name='í‘œì‹œ ìˆœì„œ')),
                ('classroom', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='behavior_categories', to='happy_seed.hsclassroom')),
            ],
            options={
                'verbose_name': 'í–‰ë™ ì¹´í…Œê³ ë¦¬',
                'verbose_name_plural': 'í–‰ë™ ì¹´í…Œê³ ë¦¬ ëª©ë¡',
                'ordering': ['display_order'],
                'unique_together': {('classroom', 'code')},
            },
        ),
        migrations.CreateModel(
            name='HSActivity',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200, verbose_name='ì œëª©')),
                ('description', models.TextField(blank=True, verbose_name='ì„¤ëª…')),
                ('threshold_score', models.IntegerField(default=80, verbose_name='ê¸°ì¤€ ì ìˆ˜')),
                ('extra_bloom_count', models.IntegerField(default=1, verbose_name='ì¶”ê°€ ë¸”ë£¸ ìˆ˜')),
                ('classroom', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='activities', to='happy_seed.hsclassroom')),
            ],
            options={
                'verbose_name': 'í™œë™',
                'verbose_name_plural': 'í™œë™ ëª©ë¡',
            },
        ),
        migrations.CreateModel(
            name='HSClassroomConfig',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('seeds_per_bloom', models.IntegerField(default=10, verbose_name='ë¸”ë£¸ ì „í™˜ ê¸°ì¤€')),
                ('base_win_rate', models.IntegerField(default=5, verbose_name='ê¸°ë³¸ ë‹¹ì²¨ í™•ë¥ (%)')),
                ('group_draw_count', models.IntegerField(default=1, verbose_name='ëª¨ë‘  ì„±ê³µ ì‹œ ëœë¤ ì¸ì›ìˆ˜')),
                ('balance_mode_enabled', models.BooleanField(default=False, verbose_name='ë”°ëœ»í•œ ê· í˜• ëª¨ë“œ')),
                ('balance_epsilon', models.FloatField(default=0.05, verbose_name='ë³´ì • ê³„ìˆ˜')),
                ('balance_lookback_days', models.IntegerField(default=30, verbose_name='ë³´ì • ê¸°ê°„(ì¼)')),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('classroom', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='config', to='happy_seed.hsclassroom')),
            ],
            options={
                'verbose_name': 'êµì‹¤ ì„¤ì •',
                'verbose_name_plural': 'êµì‹¤ ì„¤ì • ëª©ë¡',
            },
        ),
        migrations.CreateModel(
            name='HSPrize',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=200, verbose_name='ë³´ìƒ ì´ë¦„')),
                ('description', models.TextField(blank=True, verbose_name='ì„¤ëª…')),
                ('total_quantity', models.IntegerField(blank=True, help_text='ë¹„ì›Œë‘ë©´ ë¬´ì œí•œ', null=True, verbose_name='ì´ ìˆ˜ëŸ‰')),
                ('remaining_quantity', models.IntegerField(blank=True, null=True, verbose_name='ë‚¨ì€ ìˆ˜ëŸ‰')),
                ('is_active', models.BooleanField(default=True)),
                ('display_order', models.IntegerField(default=0, verbose_name='í‘œì‹œ ìˆœì„œ')),
                ('classroom', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='prizes', to='happy_seed.hsclassroom')),
            ],
            options={
                'verbose_name': 'ë³´ìƒ',
                'verbose_name_plural': 'ë³´ìƒ ëª©ë¡',
                'ordering': ['display_order', 'name'],
            },
        ),
        migrations.CreateModel(
            name='HSStudent',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=50, verbose_name='ì´ë¦„')),
                ('number', models.IntegerField(default=0, verbose_name='ë²ˆí˜¸')),
                ('seed_count', models.IntegerField(default=0, verbose_name='í˜„ì¬ ì”¨ì•—')),
                ('ticket_count', models.IntegerField(default=0, verbose_name='í˜„ì¬ ë³´ìœ  í‹°ì¼“ ìˆ˜')),
                ('total_wins', models.IntegerField(default=0, verbose_name='ì´ ë‹¹ì²¨ íšŸìˆ˜')),
                ('pending_forced_win', models.BooleanField(default=False, verbose_name='ë‹¤ìŒ íšŒ ê°•ì œ ë‹¹ì²¨')),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('classroom', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='students', to='happy_seed.hsclassroom')),
            ],
            options={
                'verbose_name': 'í•™ìƒ',
                'verbose_name_plural': 'í•™ìƒ ëª©ë¡',
                'ordering': ['number', 'name'],
                'unique_together': {('classroom', 'number')},
            },
        ),
        migrations.CreateModel(
            name='HSInterventionLog',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('action', models.CharField(choices=[('forced_win_immediate', 'ì¦‰ì‹œ ê°•ì œ ë‹¹ì²¨'), ('forced_win_next', 'ë‹¤ìŒ íšŒ ê°•ì œ ë‹¹ì²¨'), ('seed_grant', 'ì”¨ì•— ë¶€ì—¬'), ('seed_deduct', 'ì”¨ì•— ì°¨ê°')], max_length=25, verbose_name='ê°œì… ìœ í˜•')),
                ('detail', models.TextField(blank=True, verbose_name='ì‚¬ìœ ')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('classroom', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='intervention_logs', to='happy_seed.hsclassroom')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='hs_interventions', to=settings.AUTH_USER_MODEL)),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='intervention_logs', to='happy_seed.hsstudent')),
            ],
            options={
                'verbose_name': 'êµì‚¬ ê°œì… ë¡œê·¸',
                'verbose_name_plural': 'êµì‚¬ ê°œì… ë¡œê·¸ ëª©ë¡',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='HSGuardianConsent',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('status', models.CharField(choices=[('pending', 'ëŒ€ê¸°ì¤‘'), ('approved', 'ë™ì˜ì™„ë£Œ'), ('rejected', 'ê±°ë¶€'), ('expired', 'ë§Œë£Œ'), ('withdrawn', 'ì² íšŒ')], default='pending', max_length=10, verbose_name='ë™ì˜ ìƒíƒœ')),
                ('external_url', models.URLField(blank=True, verbose_name='ì™¸ë¶€ ì „ìì„œëª… ë§í¬')),
                ('note', models.TextField(blank=True, verbose_name='ë¹„ê³ ')),
                ('requested_at', models.DateTimeField(blank=True, null=True, verbose_name='ë™ì˜ ìš”ì²­ ì‹œê°')),
                ('completed_at', models.DateTimeField(blank=True, null=True, verbose_name='ë™ì˜ ì™„ë£Œ ì‹œê°')),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('student', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='consent', to='happy_seed.hsstudent')),
            ],
            options={
                'verbose_name': 'ë³´í˜¸ì ë™ì˜',
                'verbose_name_plural': 'ë³´í˜¸ì ë™ì˜ ëª©ë¡',
            },
        ),
        migrations.CreateModel(
            name='HSBloomDraw',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('is_win', models.BooleanField(verbose_name='ë‹¹ì²¨ ì—¬ë¶€')),
                ('input_probability', models.DecimalField(decimal_places=2, max_digits=5, verbose_name='íˆ¬ì… í™•ë¥ (%)')),
                ('balance_adjustment', models.DecimalField(decimal_places=4, default=0, max_digits=5, verbose_name='ê· í˜•ëª¨ë“œ ë³´ì •ê°’')),
                ('effective_probability', models.DecimalField(decimal_places=2, max_digits=5, verbose_name='ìµœì¢… ì ìš© í™•ë¥ (%)')),
                ('is_forced', models.BooleanField(default=False, verbose_name='êµì‚¬ ê°œì… ì—¬ë¶€')),
                ('force_reason', models.CharField(blank=True, max_length=200, verbose_name='ê°œì… ì‚¬ìœ ')),
                ('request_id', models.UUIDField(default=uuid.uuid4, unique=True, verbose_name='ë©±ë“±ì„± í‚¤')),
                ('celebration_token', models.UUIDField(default=uuid.uuid4, unique=True, verbose_name='ì¶•í•˜ í™”ë©´ í† í°')),
                ('celebration_closed', models.BooleanField(default=False, verbose_name='ì¶•í•˜ í™”ë©´ ë‹«í˜')),
                ('drawn_at', models.DateTimeField(auto_now_add=True)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='hs_draws', to=settings.AUTH_USER_MODEL)),
                ('prize', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='draw_results', to='happy_seed.hsprize')),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='bloom_draws', to='happy_seed.hsstudent')),
            ],
            options={
                'verbose_name': 'ì¶”ì²¨ ê²°ê³¼',
                'verbose_name_plural': 'ì¶”ì²¨ ê²°ê³¼ ëª©ë¡',
                'ordering': ['-drawn_at'],
            },
        ),
        migrations.CreateModel(
            name='HSBehaviorLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('note', models.TextField(blank=True, verbose_name='ë©”ëª¨')),
                ('seeds_awarded', models.IntegerField(default=0, verbose_name='ë¶€ì—¬ ì”¨ì•—')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('category', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='logs', to='happy_seed.hsbehaviorcategory')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='hs_behavior_logs', to=settings.AUTH_USER_MODEL)),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='behavior_logs', to='happy_seed.hsstudent')),
            ],
            options={
                'verbose_name': 'í–‰ë™ ê¸°ë¡',
                'verbose_name_plural': 'í–‰ë™ ê¸°ë¡ ëª©ë¡',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='HSStudentGroup',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, verbose_name='ëª¨ë‘  ì´ë¦„')),
                ('classroom', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='groups', to='happy_seed.hsclassroom')),
                ('members', models.ManyToManyField(blank=True, related_name='student_groups', to='happy_seed.hsstudent')),
            ],
            options={
                'verbose_name': 'ëª¨ë‘ ',
                'verbose_name_plural': 'ëª¨ë‘  ëª©ë¡',
            },
        ),
        migrations.CreateModel(
            name='HSSeedLedger',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('amount', models.IntegerField(verbose_name='ë³€ë™ëŸ‰')),
                ('reason', models.CharField(choices=[('no_win', 'ë¯¸ë‹¹ì²¨ ë³´ìƒ'), ('behavior', 'í–‰ë™ ì¸ì •'), ('recovery', 'íšŒë³µ'), ('bloom_convert', 'ë¸”ë£¸ ì „í™˜'), ('teacher_grant', 'êµì‚¬ë¶€ì—¬')], max_length=20, verbose_name='ì‚¬ìœ ')),
                ('detail', models.CharField(blank=True, max_length=200, verbose_name='ìƒì„¸')),
                ('balance_after', models.IntegerField(verbose_name='ë³€ë™ í›„ ì”ì•¡')),
                ('request_id', models.UUIDField(default=uuid.uuid4, verbose_name='ë©±ë“±ì„± í‚¤')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='seed_ledger', to='happy_seed.hsstudent')),
            ],
            options={
                'verbose_name': 'ì”¨ì•— ì›ì¥',
                'verbose_name_plural': 'ì”¨ì•— ì›ì¥ ëª©ë¡',
                'ordering': ['-created_at'],
                'unique_together': {('student', 'request_id')},
            },
        ),
        migrations.CreateModel(
            name='HSActivityScore',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('score', models.IntegerField(default=0, verbose_name='ì ìˆ˜')),
                ('bloom_granted', models.BooleanField(default=False, verbose_name='ë¸”ë£¸ ë¶€ì—¬ë¨')),
                ('activity', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='scores', to='happy_seed.hsactivity')),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='activity_scores', to='happy_seed.hsstudent')),
            ],
            options={
                'verbose_name': 'í™œë™ ì ìˆ˜',
                'verbose_name_plural': 'í™œë™ ì ìˆ˜ ëª©ë¡',
                'unique_together': {('activity', 'student')},
            },
        ),
        migrations.CreateModel(
            name='HSTicketLedger',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('source', models.CharField(choices=[('participation', 'ì„±ì‹¤ì°¸ì—¬'), ('achievement', 'ìš°ìˆ˜ì„±ì·¨'), ('seed_accumulation', 'ì”¨ì•—ëˆ„ì '), ('group_draw', 'ëª¨ë‘ ì¶”ì²¨'), ('teacher_grant', 'êµì‚¬ë¶€ì—¬')], max_length=20, verbose_name='ì›ì²œ')),
                ('amount', models.IntegerField(verbose_name='ë³€ë™ëŸ‰')),
                ('detail', models.CharField(blank=True, max_length=200, verbose_name='ìƒì„¸')),
                ('balance_after', models.IntegerField(verbose_name='ë³€ë™ í›„ ì”ì•¡')),
                ('request_id', models.UUIDField(default=uuid.uuid4, verbose_name='ë©±ë“±ì„± í‚¤')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='ticket_ledger', to='happy_seed.hsstudent')),
            ],
            options={
                'verbose_name': 'í‹°ì¼“ ì›ì¥',
                'verbose_name_plural': 'í‹°ì¼“ ì›ì¥ ëª©ë¡',
                'ordering': ['-created_at'],
                'unique_together': {('student', 'request_id')},
            },
        ),
    ]
