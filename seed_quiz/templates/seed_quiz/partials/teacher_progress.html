{% if quiz_set %}
<h2 class="font-bold text-gray-700 mb-4">진행 현황 <span class="text-xs text-gray-400 font-normal">(자동 갱신)</span></h2>
<div class="grid grid-cols-2 md:grid-cols-4 gap-4">
    <div class="text-center">
        <div class="text-3xl font-black text-gray-800">{{ stats.total }}</div>
        <div class="text-xs text-gray-500 mt-1">전체 학생</div>
    </div>
    <div class="text-center">
        <div class="text-3xl font-black text-blue-600">{{ stats.started }}</div>
        <div class="text-xs text-gray-500 mt-1">접속</div>
    </div>
    <div class="text-center">
        <div class="text-3xl font-black text-green-600">{{ stats.submitted }}</div>
        <div class="text-xs text-gray-500 mt-1">제출 완료</div>
    </div>
    <div class="text-center">
        <div class="text-3xl font-black text-purple-600">{{ stats.perfect }}</div>
        <div class="text-xs text-gray-500 mt-1">만점</div>
    </div>
</div>
{% if stats.total > 0 %}
<div class="mt-4">
    <div class="flex justify-between text-xs text-gray-500 mb-1">
        <span>제출률</span>
        <span>{{ stats.submitted }}/{{ stats.total }}</span>
    </div>
    <div class="w-full bg-gray-100 rounded-full h-2">
        <div class="bg-green-500 h-2 rounded-full transition-all"
             style="width: {% widthratio stats.submitted stats.total 100 %}%"></div>
    </div>
</div>
{% endif %}

<div class="mt-4">
    <h3 class="text-xs font-bold text-gray-600 mb-2">최근 참여 학생</h3>
    {% if attempt_rows %}
    <div class="space-y-2 max-h-64 overflow-y-auto pr-1">
        {% for attempt in attempt_rows %}
        <div class="flex items-center justify-between px-3 py-2 rounded-lg border border-gray-100 bg-white">
            <div class="min-w-0">
                <p class="text-sm font-bold text-gray-700 truncate">{{ attempt.student.number }}번 {{ attempt.student.name }}</p>
                <p class="text-xs text-gray-400">{{ attempt.answer_count }}/{{ item_total }}문항 답변</p>
            </div>
            <div class="text-right">
                {% if attempt.status == 'submitted' or attempt.status == 'rewarded' %}
                <span class="inline-flex px-2 py-1 rounded-md bg-green-100 text-green-700 text-xs font-bold">제출 완료</span>
                {% else %}
                <span class="inline-flex px-2 py-1 rounded-md bg-blue-100 text-blue-700 text-xs font-bold">풀이 중</span>
                {% endif %}
                <p class="mt-1 text-[11px] text-gray-400">{{ attempt.updated_at|date:"H:i:s" }}</p>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p class="text-sm text-gray-400">아직 입장한 학생이 없습니다.</p>
    {% endif %}
</div>
{% else %}
<p class="text-sm text-gray-400 text-center py-4">배포된 퀴즈가 없습니다.</p>
{% endif %}
