<div class="clay-card p-6 rounded-2xl">
    {% if rag_notice %}
    <div class="mb-4 px-4 py-3 bg-indigo-50 border border-indigo-200 rounded-xl text-sm text-indigo-700 font-medium">
        {{ rag_notice }}
    </div>
    {% endif %}
    <div class="flex items-start justify-between gap-3 mb-4">
        <div>
            <h2 class="font-bold text-gray-700">2) ì €ì¥ëœ ë¬¸ì œ í™•ì¸</h2>
            <p class="text-xs text-gray-500 mt-1">
                ì¶œì²˜: {% if quiz_set.source == 'bank' %}í€´ì¦ˆ ì€í–‰{% elif quiz_set.source == 'csv' %}CSV{% elif quiz_set.source == 'fallback' %}ê¸°ë³¸ ë¬¸ì œ{% else %}AI{% endif %}
            </p>
            <p class="text-xs text-gray-500 mt-1">ë¬¸ì œê°€ ë§ìœ¼ë©´ ì•„ë˜ ë²„íŠ¼ìœ¼ë¡œ í•™ìƒì—ê²Œ ë°”ë¡œ ë°°í¬í•˜ì„¸ìš”.</p>
        </div>
    </div>

    <div class="space-y-5 mb-6">
        {% for item in items %}
        <div class="p-4 bg-gray-50 rounded-xl">
            <div class="flex items-center gap-2 mb-2">
                <span class="text-xs font-bold px-2 py-0.5 bg-purple-100 text-purple-600 rounded-full">{{ item.order_no }}ë²ˆ</span>
                <span class="text-xs text-gray-400">{{ item.difficulty }}</span>
            </div>
            <p class="font-bold text-gray-800 mb-3 leading-snug" style="word-break:keep-all">{{ item.question_text }}</p>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-2 mb-3">
                {% for choice in item.choices %}
                <div class="px-3 py-2 rounded-lg text-sm {% if forloop.counter0 == item.correct_index %}bg-green-100 border border-green-300 text-green-800 font-bold{% else %}bg-white border border-gray-200 text-gray-600{% endif %}">
                    {% if forloop.counter0 == item.correct_index %}âœ“ {% endif %}{{ choice }}
                </div>
                {% endfor %}
            </div>
            {% if item.explanation %}
            <p class="text-xs text-gray-500 bg-blue-50 px-3 py-2 rounded-lg">ğŸ’¡ {{ item.explanation }}</p>
            {% endif %}
        </div>
        {% endfor %}
    </div>

    <div class="flex gap-3">
        <button type="button"
                hx-get="{% url 'seed_quiz:htmx_bank_browse' classroom_id=classroom.id %}"
                hx-include="#bank-filter-form"
                hx-target="#bank-area"
                hx-swap="innerHTML"
                class="px-4 py-2 bg-gray-100 text-gray-600 rounded-lg text-sm font-bold hover:bg-gray-200 transition-colors">
            ğŸ“š ë‹¤ë¥¸ ì„¸íŠ¸ ê³ ë¥´ê¸°
        </button>

        <!-- ë°°í¬ -->
        <form hx-post="{% url 'seed_quiz:htmx_publish' classroom_id=classroom.id set_id=quiz_set.id %}"
              hx-target="#preview-area"
              hx-swap="innerHTML">
            {% csrf_token %}
            <button type="submit"
                    class="px-5 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg text-sm font-bold hover:shadow-md transition-all">
                ğŸš€ 3) í•™ìƒì—ê²Œ ë°°í¬í•˜ê¸°
            </button>
        </form>
    </div>
</div>
