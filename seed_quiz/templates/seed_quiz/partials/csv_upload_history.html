<div>
    <h2 class="font-bold text-gray-700 mb-3">CSV 업로드 이력 (최근 20건)</h2>
    {% if history_logs %}
    <div class="overflow-x-auto">
        <table class="w-full text-xs">
            <thead>
                <tr class="text-left text-gray-500 border-b border-gray-200">
                    <th class="py-2 pr-2">시각</th>
                    <th class="py-2 pr-2">상태</th>
                    <th class="py-2 pr-2">이벤트</th>
                    <th class="py-2">요약</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-gray-100">
                {% for log in history_logs %}
                <tr class="text-gray-700">
                    <td class="py-2 pr-2 whitespace-nowrap">{{ log.created_at|date:"m-d H:i:s" }}</td>
                    <td class="py-2 pr-2">
                        {% if log.level == 'error' %}
                        <span class="px-2 py-0.5 rounded-full bg-red-100 text-red-700 font-bold">오류</span>
                        {% elif log.level == 'warn' %}
                        <span class="px-2 py-0.5 rounded-full bg-amber-100 text-amber-700 font-bold">실패</span>
                        {% else %}
                        <span class="px-2 py-0.5 rounded-full bg-emerald-100 text-emerald-700 font-bold">성공</span>
                        {% endif %}
                    </td>
                    <td class="py-2 pr-2">{{ log.code }}</td>
                    <td class="py-2">
                        <div class="font-medium">{{ log.message }}</div>
                        {% if log.payload.filename %}
                        <div class="text-[11px] text-gray-500 mt-0.5">파일: {{ log.payload.filename }}</div>
                        {% endif %}
                        {% if log.payload.error_count %}
                        <div class="text-[11px] text-amber-700 mt-0.5">오류 {{ log.payload.error_count }}건</div>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <p class="text-sm text-gray-400">아직 CSV 업로드 이력이 없습니다.</p>
    {% endif %}
</div>
