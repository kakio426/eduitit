{% extends 'base.html' %}
{% load static %}

{% block extra_head %}
<meta property="og:title" content="í•™êµìƒí™œ ë™ë¬¼ ì°¾ê¸° - êµì‚¬ ëŒ€ì‹œë³´ë“œ" />
<meta property="og:description" content="í•™ìƒ í•™êµìƒí™œ ë™ë¬¼ ê²€ì‚¬ ì„¸ì…˜ ê´€ë¦¬" />
{% endblock %}

{% block extra_css %}
<style>
    .session-card {
        background: linear-gradient(135deg, #E0E5EC 0%, #F5F7FA 100%);
        border-radius: 20px;
        box-shadow: 8px 8px 16px #b8bec5, -8px -8px 16px #ffffff;
        transition: all 0.3s ease;
    }

    .session-card:hover {
        transform: translateY(-4px);
        box-shadow: 12px 12px 24px #b8bec5, -12px -12px 24px #ffffff;
    }

    .status-badge {
        padding: 0.25rem 0.75rem;
        border-radius: 9999px;
        font-size: 0.75rem;
        font-weight: bold;
    }

    .status-active {
        background: #DCFCE7;
        color: #15803D;
    }

    .status-inactive {
        background: #FEE2E2;
        color: #DC2626;
    }
</style>
{% endblock %}

{% block content %}
<section class="pt-32 pb-20 px-6 min-h-screen bg-[#E0E5EC]">
    <div class="max-w-4xl mx-auto">
        <!-- í—¤ë” -->
        <div class="text-center mb-12" data-aos="fade-up">
            <div class="text-7xl mb-4 float-icon">{{ service.icon|default:"ğŸ“" }}</div>
            <h1 class="text-4xl md:text-5xl font-bold text-gray-700 font-title mb-4">
                {{ service.title|default:"í•™êµìƒí™œ ë™ë¬¼ ì°¾ê¸°" }}
            </h1>
            <p class="text-xl text-gray-500">{{ service.lead_text|default:"í•™ìƒ ìƒë‹´ì„ ìœ„í•œ ìºë¦­í„° ê²€ì‚¬ ì„¸ì…˜ ê´€ë¦¬" }}</p>
        </div>

        <!-- ìƒˆ ì„¸ì…˜ ìƒì„± -->
        <div class="clay-card p-6 mb-8" data-aos="fade-up">
            <h2 class="text-xl font-bold text-gray-700 mb-4 flex items-center gap-2">
                <i class="fa-solid fa-plus-circle text-orange-500"></i>
                ìƒˆ ê²€ì‚¬ ì„¸ì…˜ ë§Œë“¤ê¸°
            </h2>
            <form action="{% url 'studentmbti:session_create' %}" method="post" class="flex gap-4">
                {% csrf_token %}
                <input type="text" name="session_name" placeholder="ì˜ˆ: 3í•™ë…„ 1ë°˜ ìºë¦­í„° ê²€ì‚¬"
                    class="flex-1 px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-orange-500 focus:outline-none text-lg">
                <button type="submit"
                    class="px-8 py-3 bg-gradient-to-r from-orange-500 to-amber-500 text-white rounded-xl font-bold shadow-lg hover:shadow-xl transition transform hover:scale-105">
                    <i class="fa-solid fa-qrcode mr-2"></i>
                    ì„¸ì…˜ ìƒì„±
                </button>
            </form>
        </div>

        <!-- ì„¸ì…˜ ëª©ë¡ -->
        <div class="space-y-4">
            <h2 class="text-2xl font-bold text-gray-700 flex items-center gap-2">
                <i class="fa-solid fa-list text-purple-500"></i>
                ë‚´ ê²€ì‚¬ ì„¸ì…˜ ëª©ë¡
            </h2>

            {% if sessions %}
            {% for session in sessions %}
            <div class="session-card p-6" data-aos="fade-up" data-aos-delay="{{ forloop.counter }}00">
                <div class="flex items-center justify-between">
                    <div class="flex-1">
                        <div class="flex items-center gap-3 mb-2">
                            <h3 class="text-xl font-bold text-gray-700">{{ session.session_name }}</h3>
                            {% if session.is_active %}
                            <span class="status-badge status-active">
                                <i class="fa-solid fa-circle-check mr-1"></i>í™œì„±
                            </span>
                            {% else %}
                            <span class="status-badge status-inactive">
                                <i class="fa-solid fa-circle-xmark mr-1"></i>ì¢…ë£Œ
                            </span>
                            {% endif %}
                        </div>
                        <div class="text-gray-500 text-sm flex items-center gap-4 flex-wrap">
                            <span><i class="fa-solid fa-users mr-1"></i>{{ session.result_count }}ëª… ì°¸ì—¬</span>
                            <span><i class="fa-solid fa-calendar mr-1"></i>{{ session.created_at|date:"Y-m-d H:i"}}</span>
                            {% if session.access_code %}
                            <span class="font-bold text-purple-600"><i class="fa-solid fa-key mr-1"></i>ì½”ë“œ: {{session.access_code }}</span>
                            {% endif %}
                        </div>
                    </div>
                    <div class="flex gap-2">
                        <a href="{% url 'studentmbti:session_detail' session.id %}"
                            class="px-6 py-3 bg-white rounded-xl font-bold text-gray-700 shadow-md hover:shadow-lg transition flex items-center gap-2">
                            <i class="fa-solid fa-eye"></i>
                            ìƒì„¸ë³´ê¸°
                        </a>
                        <form action="{% url 'studentmbti:session_delete' session.id %}" method="post"
                            onsubmit="return confirm('ì •ë§ë¡œ ì´ ì„¸ì…˜ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ëª¨ë“  ê²°ê³¼ê°€ í•¨ê»˜ ì‚­ì œë©ë‹ˆë‹¤.');">
                            {% csrf_token %}
                            <button type="submit"
                                class="px-4 py-3 bg-red-100 text-red-600 rounded-xl font-bold hover:bg-red-200 transition">
                                <i class="fa-solid fa-trash"></i>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
            {% endfor %}
            {% else %}
            <div class="text-center py-12 text-gray-400">
                <i class="fa-solid fa-folder-open text-5xl mb-4"></i>
                <p class="text-lg">ì•„ì§ ìƒì„±ëœ ê²€ì‚¬ ì„¸ì…˜ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                <p>ìœ„ì—ì„œ ìƒˆ ì„¸ì…˜ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”!</p>
            </div>
            {% endif %}
        </div>
    </div>
</section>
{% endblock %}