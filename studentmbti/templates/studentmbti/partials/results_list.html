{% load static %}

{% if results %}
{% for result in results %}
<a href="{% if result.mbti_type %}{% url 'studentmbti:result_detail_teacher' result.id %}{% else %}#{% endif %}"
    class="result-row flex items-center justify-between block {% if result.mbti_type %}hover:bg-gray-50{% else %}opacity-60{% endif %}">
    <div class="flex items-center gap-4">
        <div class="w-12 h-12 flex items-center justify-center bg-gray-100 rounded-full text-2xl">
            {% if result.mbti_type %}ğŸ“{% else %}â³{% endif %}
        </div>
        <div>
            <div class="font-bold text-gray-700">{{ result.student_name }}</div>
            <div class="text-sm text-gray-500">
                {% if result.mbti_type %}
                {{ result.animal_name }}
                {% else %}
                <span class="text-orange-500 animate-pulse">ê²€ì‚¬ ì§„í–‰ ì¤‘...</span>
                {% endif %}
            </div>
        </div>
    </div>
    <div class="text-right">
        <div class="text-sm text-gray-400">{{ result.created_at|date:"H:i" }}</div>
        {% if result.mbti_type %}
        <div class="text-xs text-orange-500 font-bold">ìƒì„¸ë³´ê¸° <i class="fa-solid fa-chevron-right"></i></div>
        {% else %}
        <div class="text-xs text-gray-400">ëŒ€ê¸° ì¤‘</div>
        {% endif %}
    </div>
</a>
{% endfor %}
{% else %}
<div class="text-center py-12 text-gray-400">
    <i class="fa-solid fa-hourglass-half text-4xl mb-4 animate-pulse"></i>
    <p class="text-lg">ì•„ì§ ì°¸ì—¬í•œ í•™ìƒì´ ì—†ìŠµë‹ˆë‹¤</p>
    <p class="text-sm">í•™ìƒë“¤ì´ QR ì½”ë“œë¥¼ ìŠ¤ìº”í•˜ë©´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</p>
</div>
{% endif %}

<!-- HTMX OOB swap for real-time count update -->
<span id="total-count" hx-swap-oob="innerHTML">{{ total_count }}ëª…</span>