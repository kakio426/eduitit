{% extends 'autoarticle/wizard/base_wizard.html' %}
{% block wizard_content %}
<div class='clay-card p-10 bg-white shadow-clay rounded-[2rem]'>
    <h2 class='text-3xl font-bold text-gray-800 mb-6'>âœï¸ ê¸°ì‚¬ í¸ì§‘ ë° ì €ì¥</h2>
    <form method='post' action='{% url "autoarticle:create" %}'>
        {% csrf_token %}
        <input type='hidden' name='step' value='3'>
        <div class='space-y-6'>
            <div>
                <label class='block text-sm font-bold mb-2'>ì œëª©</label>
                <input type='text' name='title' value='{{ draft.title }}'
                    class='w-full text-2xl font-bold p-5 border-2 rounded-2xl bg-gray-50'>
            </div>
            <div>
                <label class='block text-sm font-bold mb-2'>ë³¸ë¬¸</label>
                <textarea name='content' class='w-full p-5 border-2 rounded-2xl bg-gray-50 text-xl'
                    rows='15'>{{ draft.content }}</textarea>
            </div>
            <div>
                <label class='block text-sm font-bold mb-2'>í•´ì‹œíƒœê·¸</label>
                <input type='text' name='hashtags' value='{{ draft.hashtags|join:" " }}'
                    class='w-full p-5 border-2 rounded-2xl bg-gray-50'>
            </div>

            {% if draft.images %}
            <div class="mt-8">
                <label class='block text-sm font-bold mb-4'>ğŸ“¸ ì²¨ë¶€ëœ ì‚¬ì§„ ({{ draft.images|length }}ê°œ)</label>
                <div class="flex flex-wrap gap-4">
                    {% for img_path in draft.images %}
                    <div class="relative w-32 h-32 rounded-2xl overflow-hidden shadow-clay bg-gray-200">
                        {% if img_path %}
                            <img src="{{ img_path }}" class="w-full h-full object-cover" alt="ì²¨ë¶€ ì´ë¯¸ì§€"
                                 onerror="console.error('Failed to load:', this.src)">
                        {% else %}
                            <div class="w-full h-full flex items-center justify-center text-gray-400">ì´ë¯¸ì§€ ì—†ìŒ</div>
                        {% endif %}
                    </div>
                    {% endfor %}
                </div>
                <!-- ë””ë²„ê·¸ ì •ë³´ -->
                <div class="mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg text-sm">
                    <p class="text-gray-600">ì´ë¯¸ì§€ ë°ì´í„°: {{ draft.images|length }}ê°œ</p>
                    {% for img_path in draft.images %}
                    <p class="text-gray-500 break-all">{{ img_path }}</p>
                    {% endfor %}
                </div>
            </div>
            {% else %}
            <div class="mt-8 p-4 bg-red-50 border border-red-200 rounded-lg">
                <p class="text-red-600">ì²¨ë¶€ëœ ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
            </div>
            {% endif %}
            <button type='submit'
                class='w-full py-5 bg-green-500 text-white font-bold text-2xl rounded-3xl shadow-clay hover:shadow-clay-hover transition-all'>ê¸°ì‚¬
                ì €ì¥ ì™„ë£Œ!</button>
        </div>
    </form>
</div>
<script>window.onload = function() { window.scrollTo(0, 0); }</script>
{% endblock %}