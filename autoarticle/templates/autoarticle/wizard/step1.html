{% extends 'autoarticle/wizard/base_wizard.html' %}

{% block wizard_content %}
<div class="clay-card p-10 bg-white/90 backdrop-blur-xl relative overflow-hidden" data-aos="zoom-in">
    <div
        class="absolute top-0 right-0 -mr-16 -mt-16 w-64 h-64 rounded-full bg-purple-100 opacity-50 blur-3xl pointer-events-none">
    </div>

    <div class="relative z-10">
        <h3 class="text-3xl font-bold text-gray-800 mb-2">ğŸ“ í–‰ì‚¬ ì •ë³´ ì…ë ¥</h3>
        <p class="text-gray-500 mb-10 font-hand text-xl">í–‰ì‚¬ì˜ í•µì‹¬ì ì¸ ë‚´ìš©ë“¤ì„ ì•Œë ¤ì£¼ì‹œë©´ AIê°€ ë©‹ì§„ ê¸°ì‚¬ë¥¼ ì¨ ë“œë¦½ë‹ˆë‹¤.</p>

        <form method="post" action="{% url 'autoarticle:create' %}" id="creationForm" onsubmit="showLoader()">
            {% csrf_token %}
            <input type="hidden" name="step" value="1">
            <input type="hidden" name="school_name" value="{{ school_name }}">
            <input type="hidden" name="theme" value="{{ theme }}">

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Left Hand Side -->
                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">ğŸ“Œ ì°¸ì—¬ í•™ë…„</label>
                        <select name="grade"
                            class="w-full px-5 py-4 rounded-2xl border-2 border-gray-100 focus:border-purple-500 focus:ring-4 focus:ring-purple-100 transition-all text-gray-700 shadow-inner bg-gray-50">
                            <option>ì „êµìƒ</option>
                            <option>1í•™ë…„</option>
                            <option>2í•™ë…„</option>
                            <option>3í•™ë…„</option>
                            <option>4í•™ë…„</option>
                            <option>5í•™ë…„</option>
                            <option>6í•™ë…„</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">ğŸ“ í–‰ì‚¬ëª…</label>
                        <input type="text" name="event_name" placeholder="ì˜ˆ: ì°¾ì•„ê°€ëŠ” ëª©ê³µ ì²´í—˜" required
                            class="w-full px-5 py-4 rounded-2xl border-2 border-gray-100 focus:border-purple-400 focus:ring-4 focus:ring-purple-100 transition-all bg-gray-50 shadow-inner">
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">ğŸ« ì¥ì†Œ</label>
                        <input type="text" name="location" placeholder="ì˜ˆ: í•™êµ ê°•ë‹¹"
                            class="w-full px-5 py-4 rounded-2xl border-2 border-gray-100 focus:border-purple-400 focus:ring-4 focus:ring-purple-100 transition-all bg-gray-50 shadow-inner">
                    </div>
                </div>

                <!-- Right Hand Side -->
                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">ğŸ“… ì¼ì‹œ</label>
                        <input type="date" name="date" value="{{ today }}"
                            class="w-full px-5 py-4 rounded-2xl border-2 border-gray-100 focus:border-purple-400 focus:ring-4 focus:ring-purple-100 transition-all bg-gray-50 shadow-inner">
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">ğŸŒˆ ê¸°ì‚¬ í†¤ (ë¶„ìœ„ê¸°)</label>
                        <select name="tone"
                            class="w-full px-5 py-4 rounded-2xl border-2 border-gray-100 focus:border-purple-500 focus:ring-4 focus:ring-purple-100 transition-all text-gray-700 shadow-inner bg-gray-50">
                            <option>ë”°ëœ»í•˜ê³  ê°ì„±ì ì¸</option>
                            <option>í™œë°œí•˜ê³  ìƒë™ê° ìˆëŠ”</option>
                            <option>ê²©ì¡° ìˆê³  ì •ì¤‘í•œ</option>
                            <option>ê°„ê²°í•˜ê³  ëª…í™•í•œ</option>
                        </select>
                    </div>

                    <div class="md:col-span-2">
                        <label class="block text-sm font-bold text-gray-700 mb-2">âœï¸ ì£¼ìš” í™œë™ ë‚´ìš© (í‚¤ì›Œë“œ)</label>
                        <textarea name="keywords" rows="4" required placeholder="ì•„ì´ë“¤ì´ ë‚˜ë¬´ ëƒ„ìƒˆë¥¼ ë§¡ìœ¼ë©° ì¦ê±°ì›Œí•¨, ëšë”±ëšë”± ë§ì¹˜ì§ˆ ì†Œë¦¬..."
                            class="w-full px-5 py-4 rounded-2xl border-2 border-gray-100 focus:border-purple-400 focus:ring-4 focus:ring-purple-100 transition-all bg-gray-50 shadow-inner"></textarea>
                    </div>
                </div>
            </div>

            <div class="mt-12">
                <button type="submit"
                    class="w-full py-5 rounded-3xl bg-gradient-to-r from-purple-600 to-blue-600 text-white font-bold text-2xl shadow-clay hover:shadow-clay-hover active:scale-95 transition-all flex items-center justify-center gap-3">
                    <i class="fa-solid fa-sparkles"></i> AIë¡œ ì´ˆì•ˆ ìƒì„±í•˜ê¸°
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Loader Overlay -->
<div id="loader" class="fixed inset-0 bg-white/80 backdrop-blur-xl z-[100] hidden flex-col items-center justify-center">
    <div class="relative w-48 h-48 mb-8">
        <div class="absolute inset-0 rounded-full border-4 border-purple-100 border-t-purple-600 animate-spin"></div>
        <div class="absolute inset-4 rounded-full border-4 border-blue-100 border-t-blue-600 animate-spin-reverse">
        </div>
        <div class="absolute inset-0 flex items-center justify-center">
            <i class="fa-solid fa-wand-magic-sparkles text-5xl text-purple-600 animate-pulse"></i>
        </div>
    </div>
    <h3 class="text-3xl font-bold text-gray-800 mb-4 font-display">Geminiê°€ ê¸°ì‚¬ë¥¼ ì‘ì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...</h3>
    <p class="text-gray-500 font-hand text-xl">í‰ê·  10~20ì´ˆ ì •ë„ ì†Œìš”ë©ë‹ˆë‹¤.</p>
</div>

<script>
    function showLoader() {
        document.getElementById('loader').classList.remove('hidden');
        document.getElementById('loader').classList.add('flex');
    }
</script>

<style>
    @keyframes spin-reverse {
        from {
            transform: rotate(360deg);
        }

        to {
            transform: rotate(0deg);
        }
    }

    .animate-spin-reverse {
        animation: spin-reverse 1.5s linear infinite;
    }
</style>
{% endblock %}