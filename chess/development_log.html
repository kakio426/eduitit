<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>Django와 JS로 만드는 웹 체스 게임 개발기</title>
    <style>
        body {
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
            line-height: 1.8;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 40px;
            background-color: white;
            /* 흰색 배경 강제 */
        }

        h1 {
            font-size: 2em;
            border-bottom: 2px solid #eee;
            padding-bottom: 15px;
            margin-bottom: 30px;
        }

        h2 {
            margin-top: 40px;
            font-size: 1.5em;
            color: #0066cc;
        }

        h3 {
            margin-top: 30px;
            font-size: 1.2em;
            font-weight: bold;
        }

        p {
            margin-bottom: 20px;
        }

        code {
            background-color: #f4f4f4;
            padding: 2px 5px;
            border-radius: 3px;
            font-family: consolas, monospace;
        }

        pre {
            background-color: #f4f4f4;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }

        li {
            margin-bottom: 10px;
        }

        .meta {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 40px;
        }
    </style>
</head>

<body>

    <h1>Django와 JS로 만드는 웹 체스 게임 개발기: AI 엔진 도입부터 UX 최적화까지</h1>

    <div class="meta">
        작성일: 2026-02-05 | 태그: Django, JavaScript, Stockfish, UI/UX
    </div>

    <p>이번 포스팅에서는 교육 플랫폼 <strong>Eduitit</strong>에 새롭게 추가된 <strong>체스(Chess)</strong> 기능의 개발 과정을 공유합니다. 단순한 미니 게임처럼 보일 수
        있지만, 실제로는 강력한 오픈소스 AI 엔진을 웹 환경에 이식하고, 사용자 경험(UX)을 다듬는 치열한 고민들이 숨어있습니다.</p>

    <h2>1. 기술 스택 선정: 왜 이렇게 골랐나?</h2>
    <p>체스 게임은 '규칙'이 매우 엄격하고 복잡합니다. 이를 서버(Python/Django)에서 매번 검증하면 반응 속도가 느려질 수밖에 없습니다. 따라서 게임 로직은 클라이언트(브라우저)에서 처리하고,
        Django는 페이지 서빙만 담당하는 구조를 택했습니다.</p>
    <ul>
        <li><strong>Backend</strong>: Django (페이지 라우팅, 정적 파일 서빙)</li>
        <li><strong>Frontend Logic</strong>: Vanilla JS + jQuery</li>
        <li><strong>Libraries</strong>:
            <ul>
                <li><code>chess.js</code>: 체스 규칙 검증, 수 읽기, 체크메이트 판단 (두뇌 역할)</li>
                <li><code>chessboard.js</code>: 체스판 시각적 렌더링 (화면 역할)</li>
                <li><code>stockfish.js</code>: 세계 최강 수준의 오픈소스 체스 AI 엔진 (WASM/JS 포팅 버전)</li>
            </ul>
        </li>
    </ul>

    <h2>2. 개발의 핵심: "스파게티 코드를 정리하자"</h2>
    <p>초기 개발 단계에서는 <code>play.html</code>이라는 템플릿 파일 하나에 HTML, CSS, JavaScript가 뒤섞여 있었습니다. AI 로직이 추가되면서 코드가 수백 줄로 늘어나자
        유지보수가 불가능해졌습니다.</p>
    <p>가장 먼저 한 작업은 <strong>로직 분리(Refactoring)</strong>였습니다.<br>
        게임의 핵심 로직을 <code>chess_logic.js</code>라는 별도 파일로 분리하고, 다음과 같이 역할을 명확히 나눴습니다.</p>
    <ul>
        <li><strong>초기화(Initialization)</strong>: 보드 설정, 이벤트 리스너 연결</li>
        <li><strong>상호작용(Interaction)</strong>: 클릭 이벤트 처리, 유효한 수(Move) 검증</li>
        <li><strong>AI 두뇌(AI Logic)</strong>: Stockfish 엔진과의 통신 담당</li>
        <li><strong>UI 업데이트</strong>: 생각 중 표시, 이동 기록(History) 출력</li>
    </ul>
    <p>이렇게 구조를 잡고 나니, 버그가 발생했을 때 어디를 봐야 할지 명확해졌고 기능 확장도 훨씬 쉬워졌습니다.</p>

    <h2>3. 강력한 AI, Stockfish 연동하기</h2>
    <p>이번 프로젝트의 백미는 바로 <strong>AI 대전</strong> 기능입니다. 단순히 무작위로 두는 AI가 아니라, 실제 프로 선수들도 분석용으로 사용하는 'Stockfish' 엔진을 웹에
        탑재했습니다.</p>

    <h3>문제점: 웹 브라우저가 멈춘다?</h3>
    <p>Stockfish는 매우 복잡한 수읽기 연산을 수행합니다. 이를 일반 자바스크립트 메인 스레드에서 돌리면, AI가 수를 고민하는 몇 초 동안 브라우저 전체가 멈추는(Freezing) 현상이 발생했습니다.
    </p>

    <h3>해결책: Web Worker 도입</h3>
    <p>이를 해결하기 위해 <strong>Web Worker</strong> 기술을 사용했습니다. AI 연산을 메인 화면과 분리된 별도의 백그라운드 스레드에서 실행하도록 변경했습니다.</p>

    <pre><code>// 메인 스레드와 분리하여 엔진 실행
stockfish = new Worker(STOCKFISH_PATH);

// 엔진으로부터 메시지 수신
stockfish.onmessage = function(event) {
    // AI의 응답 처리 (예: 최선의 수 발견)
};</code></pre>

    <p>덕분에 AI가 아무리 깊게 수를 생각해도, 화면은 부드럽게 반응하며 "AI가 계산 중입니다..."라는 로딩 애니메이션을 보여줄 수 있게 되었습니다.</p>

    <h3>난이도 조절의 비밀</h3>
    <p>학생들도 즐길 수 있어야 하기에 난이도 조절이 필수였습니다. Stockfish는 너무 강력해서 그냥 두면 초보자는 절대 이길 수 없습니다. 우리는 엔진에 전달하는 파라미터를 조절해 4단계 난이도를
        구현했습니다.</p>
    <ul>
        <li><strong>초급 (Easy)</strong>: 3수 앞까지만 계산 (반응 속도 0.3초)</li>
        <li><strong>중급 (Medium)</strong>: 6수 앞까지 계산</li>
        <li><strong>고급 (Hard)</strong>: 10수 앞까지 정밀 계산</li>
        <li><strong>최강 (Expert)</strong>: 15수 이상, 시간 제한 5초 (사실상 이기기 힘듦)</li>
    </ul>

    <h2>4. UX 결정: 드래그 앤 드롭을 포기한 이유</h2>
    <p>보통 체스 게임 하면 기물을 드래그해서 놓는 방식을 떠올립니다. 하지만 우리는 과감하게 <strong>"클릭 투 무브(Click-to-Move)"</strong> 방식만을 채택했습니다.</p>
    <ol>
        <li><strong>모바일 호환성</strong>: 모바일 터치 환경에서 드래그 앤 드롭은 오작동하기 쉽습니다. 스크롤과 겹치거나 터치가 튀는 문제가 있었습니다.</li>
        <li><strong>명확성</strong>: 클릭 방식은 '어떤 기물을 선택했는지', '어디로 갈 수 있는지'를 시각적으로 보여주기에 훨씬 직관적입니다.</li>
    </ol>
    <p>사용자가 기물을 클릭하면 -> 이동 가능한 위치에 노란색 힌트 점을 찍어주고 -> 상대를 잡을 수 있는 위치는 빨간 테두리로 경고해주는 <strong>시각적 가이드</strong> 시스템을 구축하여
        편의성을 높였습니다.</p>

    <h2>5. 마무리하며</h2>
    <p>단순한 게임 기능 하나를 추가하는 데에도 "어떻게 하면 사용자가 불편하지 않을까?", "어떻게 하면 더 자연스러운 경험을 줄까?"를 끊임없이 고민했습니다.</p>
    <p>특히 <strong>Web Worker를 통한 성능 최적화</strong>와 <strong>모바일 친화적인 인터페이스 설계</strong>는 다른 웹 서비스를 개발할 때도 적용할 수 있는 좋은
        경험이었습니다.</p>
    <p>이제 여러분도 Eduitit에서 AI와 한 판 승부를 즐겨보세요! ♟️</p>

</body>

</html>