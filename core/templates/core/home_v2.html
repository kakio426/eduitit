{% extends 'base.html' %}

{% block title %}에듀잇잇 - 선생님의 스마트한 하루{% endblock %}

{% block extra_css %}
<style>
    .custom-scrollbar::-webkit-scrollbar { width: 4px; }
    .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
    .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
    .custom-scrollbar { scrollbar-width: thin; scrollbar-color: #cbd5e1 transparent; }

    /* 퀵 액션 스크롤 */
    .quick-scroll { -ms-overflow-style: none; scrollbar-width: none; }
    .quick-scroll::-webkit-scrollbar { display: none; }

    .sns-preview-card { background: white; border-radius: 1.5rem; border: 1px solid #e2e8f0; box-shadow: 0 1px 3px rgba(0,0,0,0.06); transition: all 0.3s ease; }
    .sns-preview-card:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.08); transform: translateY(-2px); }
</style>
{% endblock %}

{% block extra_js %}
<script src="https://unpkg.com/@phosphor-icons/web"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
    const launchCard = (card) => {
        const href = card.dataset.launchHref || `/products/${card.dataset.productId}/`;
        if (!href) return;
        const isExternal = card.dataset.launchExternal === 'true';
        if (isExternal) {
            window.open(href, '_blank', 'noopener');
            return;
        }
        window.location.href = href;
    };

    document.querySelectorAll('.product-card').forEach(card => {
        card.addEventListener('click', function(e) {
            if (e.target.closest('.product-info-trigger')) return;
            launchCard(this);
        });
        card.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                launchCard(card);
            }
        });
    });

    document.querySelectorAll('.product-info-trigger').forEach(button => {
        button.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            const id = this.dataset.productId || this.closest('[data-product-id]')?.dataset.productId;
            if (id && window.openModal) window.openModal(id);
        });
    });

    document.addEventListener('click', function(e) {
        const el = e.target.closest('[data-track]');
        if (el) console.log('[Track]', el.dataset.track, el.dataset.trackLabel);
    });
});
</script>
{% endblock %}

{% block content %}
{% url 'account_login' as login_url %}

<div class="min-h-screen bg-[#E0E5EC]">
    <div class="flex flex-col xl:flex-row xl:gap-6 max-w-[1920px] mx-auto" style="padding-top: calc(var(--main-nav-height, 88px) + 0.75rem);">

        <!-- PC 전용 SNS 사이드바 -->
        <div class="hidden xl:block flex-shrink-0">
            {% include 'core/partials/sns_widget.html' %}
        </div>

        <!-- 메인 콘텐츠 -->
        <main class="flex-1 min-w-0 pb-8 md:pb-12 px-3 sm:px-4 md:px-5 lg:px-7 xl:px-8 2xl:px-10 pt-0">

            <!-- Hero 섹션 -->
            <div class="flex flex-col justify-center text-center mb-6 md:mb-10 lg:mb-12" data-aos="fade-up">
                <h1 class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-extrabold text-gray-800 tracking-tight leading-tight mb-2 md:mb-4">
                    선생님의 <span class="text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600">스마트한 하루</span>
                </h1>
                <p class="text-sm sm:text-base md:text-lg lg:text-xl text-gray-500 max-w-3xl mx-auto leading-relaxed break-keep font-bold px-4">
                    AI로 더 똑똑하게, 더 즐겁게
                </p>
                {% if search_products_json %}
                <div class="mt-4 flex justify-center">
                    <button onclick="if(window.openSearchModal) openSearchModal()" class="flex w-full max-w-xl lg:w-auto lg:max-w-none lg:flex-shrink-0 items-center justify-center lg:justify-start gap-3 bg-white rounded-2xl lg:rounded-xl px-5 lg:px-3.5 py-3 lg:py-2.5 border border-slate-200 text-slate-400 hover:border-indigo-300 hover:text-indigo-500 transition-all text-sm shadow-sm lg:shadow-none min-h-12 lg:min-h-0" title="Ctrl+K" aria-label="서비스 검색 열기">
                        <i class="fa-solid fa-magnifying-glass text-sm md:text-xs"></i>
                        <span class="whitespace-nowrap">서비스 검색...</span>
                        <kbd class="hidden lg:inline-block ml-1 px-1.5 py-0.5 text-[10px] font-bold bg-slate-100 rounded border border-slate-200">Ctrl+K</kbd>
                    </button>
                </div>
                {% endif %}
            </div>

            <!-- 목적별 섹션 -->
            <div class="mb-6" data-aos="fade-up" data-aos-delay="50">
                {% include 'core/includes/purpose_sections.html' with sections=sections %}
            </div>

            {% if aux_sections %}
            <div class="mb-6" data-aos="fade-up" data-aos-delay="80">
                <h3 class="text-sm font-bold text-slate-500 mb-3 flex items-center gap-1.5">
                    <i class="fa-solid fa-layer-group text-cyan-500"></i> 보조 도구
                </h3>
                {% include 'core/includes/purpose_sections.html' with sections=aux_sections %}
            </div>
            {% endif %}

            <!-- 교실 활동 배너 -->
            <div class="mb-6" data-aos="fade-up" data-aos-delay="100">
                {% include 'core/includes/game_banner.html' with games=games %}
            </div>

            <!-- CTA: 로그인 유도 -->
            <div class="mb-6 text-center" data-aos="fade-up" data-aos-delay="150">
                <div class="bg-gradient-to-r from-indigo-50 to-purple-50 rounded-3xl p-6 md:p-8 border border-indigo-100">
                    <h3 class="text-lg md:text-xl font-bold text-slate-800 mb-2">나만의 대시보드를 시작하세요</h3>
                    <p class="text-sm text-slate-500 mb-4">로그인하면 맞춤 추천과 빠른 실행을 사용할 수 있어요.</p>
                    <a href="{{ login_url }}" class="inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-2xl font-bold text-sm hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl">
                        <i class="fa-solid fa-right-to-bracket"></i> 로그인하고 시작하기
                    </a>
                </div>
            </div>

            <!-- 모바일 전용 SNS 미리보기 -->
            {% include 'core/partials/sns_mobile_preview_panel.html' with root_class='block xl:hidden mt-6 md:mt-8 px-1' section_id='sns-full-section-v2' data_aos='fade-up' %}

        </main>
    </div>
</div>
{% endblock %}
