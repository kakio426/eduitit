{% with list_target_id=post_list_target_id|default:'post-list-container' %}
{% for post in posts %}
{% include 'core/partials/post_item.html' with is_first=forloop.first %}
{% empty %}
<div class="text-center py-12 text-slate-400">
    <i class="ph ph-chat-circle-dots text-5xl mb-3 opacity-30"></i>
    {% if empty_title %}
    <p class="font-medium">{{ empty_title }}</p>
    {% else %}
    <p class="font-medium">아직 작성된 글이 없습니다.</p>
    {% endif %}
    {% if empty_subtitle %}
    <p class="text-sm mt-1">{{ empty_subtitle }}</p>
    {% else %}
    <p class="text-sm mt-1">첫 번째 글을 작성해보세요!</p>
    {% endif %}
</div>
{% endfor %}

{% if page_obj.has_other_pages %}
<div class="flex items-center justify-between gap-2 mt-6 mb-2 border-t border-indigo-100 pt-4 px-2">
    {% if page_obj.has_next %}
    <button hx-get="?page={{ page_obj.next_page_number }}&target={{ list_target_id }}" hx-target="#{{ list_target_id }}" hx-swap="innerHTML" class="flex-1 bg-white text-indigo-600 hover:bg-indigo-50 border border-indigo-100 rounded-xl py-2 px-3 text-xs font-bold transition-all flex items-center justify-center gap-1.5 shadow-sm">
        <i class="ph-bold ph-caret-left"></i>
        <span>이전 대화</span>
    </button>
    {% else %}
    <button disabled class="flex-1 bg-slate-50 text-slate-400 border border-slate-100 rounded-xl py-2 px-3 text-xs font-bold flex items-center justify-center gap-1.5 opacity-50 cursor-not-allowed">
        <i class="ph-bold ph-caret-left"></i>
        <span>이전 대화</span>
    </button>
    {% endif %}
    
    <span class="text-xs font-medium text-slate-400 px-2 min-w-[50px] text-center">{{ page_obj.number }} / {{ page_obj.paginator.num_pages }}</span>

    {% if page_obj.has_previous %}
    <button hx-get="?page={{ page_obj.previous_page_number }}&target={{ list_target_id }}" hx-target="#{{ list_target_id }}" hx-swap="innerHTML" class="flex-1 bg-white text-indigo-600 hover:bg-indigo-50 border border-indigo-100 rounded-xl py-2 px-3 text-xs font-bold transition-all flex items-center justify-center gap-1.5 shadow-sm">
        <span>최신 대화</span>
        <i class="ph-bold ph-caret-right"></i>
    </button>
    {% else %}
    <button disabled class="flex-1 bg-slate-50 text-slate-400 border border-slate-100 rounded-xl py-2 px-3 text-xs font-bold flex items-center justify-center gap-1.5 opacity-50 cursor-not-allowed">
        <span>최신 대화</span>
        <i class="ph-bold ph-caret-right"></i>
    </button>
    {% endif %}
</div>
{% endif %}
{% endwith %}
