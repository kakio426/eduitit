{% extends 'base.html' %}

{% block title %}ì—ë“€ì‡ì‡ - ì„ ìƒë‹˜ì˜ ìŠ¤ë§ˆíŠ¸í•œ í•˜ë£¨{% endblock %}

{% block extra_css %}
<!-- Pretendard Font -->
<link rel="stylesheet" as="style" crossorigin
    href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
<style>
    /* Custom Scrollbar for Feed */
    .custom-scrollbar::-webkit-scrollbar {
        width: 4px;
    }

    .custom-scrollbar::-webkit-scrollbar-track {
        background: transparent;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb {
        background: #cbd5e1;
        border-radius: 4px;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
        background: #94a3b8;
    }

    .custom-scrollbar {
        scrollbar-width: thin;
        scrollbar-color: #cbd5e1 transparent;
    }
</style>
{% endblock %}

{% block extra_js %}
<!-- HTMX -->
<script src="https://unpkg.com/htmx.org@1.9.10"></script>
<script>
    document.body.addEventListener('htmx:configRequest', (event) => {
        event.detail.headers['X-CSRFToken'] = '{{ csrf_token }}';
    });
</script>
<!-- Phosphor Icons -->
<script src="https://unpkg.com/@phosphor-icons/web"></script>
<script>

    document.addEventListener('DOMContentLoaded', () => {

        // Product Cards Modal Logic - Using event delegation or direct binding
        document.querySelectorAll('.product-card').forEach(card => {
            card.addEventListener('click', function (e) {
                const id = this.getAttribute('data-product-id');
                if (window.openModal) {
                    window.openModal(id);
                }
            });

            card.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    card.click();
                }
            });
        });
    });
</script>
{% endblock %}

{% block content %}
<div
    class="flex flex-col md:flex-row min-h-screen pt-44 md:pt-40 max-w-[1920px] mx-auto bg-[#E0E5EC] font-[Pretendard]">

    <!-- SNS ìœ„ì ¯ -->
    {% include 'core/partials/sns_widget.html' %}

    <!-- [Right Area] Main Content -->
    <main class="flex-1 p-6 md:px-10 lg:px-12 overflow-y-auto pt-0 md:pt-0">


        <!-- Product Grid -->
        <div class="mb-8">
            <h3 class="font-bold text-xl text-slate-700 mb-6 flex items-center gap-2">
                <i class="ph-fill ph-squares-four text-indigo-500 text-2xl"></i> ì‚¬ìš©í•  ì„œë¹„ìŠ¤ë¥¼ ì„ íƒí•˜ì„¸ìš”
            </h3>

            <div class="bento-grid">
                {% for product in products %}
                {% include 'core/includes/card_product.html' with product=product delay='100' %}
                {% endfor %}

            </div>

            {% if not products %}
            <div class="py-24 text-center bg-white rounded-[3rem] border-2 border-dashed border-slate-200">
                <div class="text-7xl mb-6 grayscale opacity-30">ğŸï¸</div>
                <h3 class="text-xl font-bold text-slate-500 mb-2">ì‚¬ìš© ê°€ëŠ¥í•œ ì„œë¹„ìŠ¤ê°€ ì•„ì§ ì—†ë„¤ìš”.</h3>
                <p class="text-slate-400 mb-8">ê´€ë¦¬ì ìŠ¹ì¸ ëŒ€ê¸° ë˜ëŠ” ì ê²€ ì¤‘ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                <a href="/"
                    class="px-8 py-3.5 bg-slate-800 text-white rounded-2xl font-bold hover:bg-slate-700 transition shadow-lg">
                    í™ˆìœ¼ë¡œ ìƒˆë¡œê³ ì¹¨
                </a>
            </div>
            {% endif %}
        </div>
    </main>
</div>

{% endblock %}