{% extends 'base.html' %}

{% block title %}Eduitit - ì„ ìƒë‹˜ì˜ ìŠ¤ë§ˆíŠ¸í•œ í•˜ë£¨{% endblock %}

{% block content %}
<!-- URL Definitions -->
{% url 'yut_game' as yut_url %}
{% url 'prompt_lab' as prompt_lab_url %}
{% url 'tool_guide' as tool_guide_url %}

<!-- Main Content -->
<main class="pt-32 pb-20 px-4 md:px-8 min-h-screen max-w-7xl mx-auto">

    <!-- Header -->
    <div class="mb-16 text-center" data-aos="fade-down" data-aos-duration="1000">
        <div class="inline-flex items-center gap-2 px-6 py-2 rounded-full bg-[#E0E5EC] shadow-clay-inner mb-6">
            <span class="w-3 h-3 rounded-full bg-green-400 animate-pulse"></span>
            <span class="text-gray-500 font-bold text-2xl pt-1">v2.0 Updated</span>
        </div>
        <h1 class="text-7xl md:text-9xl font-bold text-gray-700 mb-2 tracking-tight leading-none text-shadow">
            ì„ ìƒë‹˜ì˜ <span class="text-transparent bg-clip-text bg-gradient-to-r from-purple-500 to-blue-500">ë””ì§€í„¸ ë¹„ì„œ</span>
        </h1>
        <p class="text-3xl md:text-4xl text-gray-400 font-hand max-w-3xl mx-auto mt-4 leading-relaxed">
            ì„¤ì¹˜ ì—†ì´, ë¡œê·¸ì¸ ì—†ì´. ìˆ˜ì—… ì¤€ë¹„ë¶€í„° í–‰ì • ì—…ë¬´ê¹Œì§€<br>
            ê°€ì¥ ìŠ¤ë§ˆíŠ¸í•œ ë„êµ¬ë“¤ì„ ë§Œë‚˜ë³´ì„¸ìš”.
        </p>
    </div>

    <!-- BENTO GRID -->
    <div class="bento-grid">

        <!-- 1. [Hero Card] Dynamic Featured Product -->
        <div class="col-span-4 md:col-span-2 row-span-2 clay-card p-10 relative overflow-hidden group cursor-pointer bg-[#E0E5EC]"
            onclick="location.href='/products/{{ featured_product.id }}/'" data-aos="fade-up" data-aos-delay="100">
            <!-- Background decoration -->
            <div
                class="absolute top-0 right-0 w-80 h-80 bg-purple-100 rounded-bl-full -mr-20 -mt-20 transition-transform duration-500 group-hover:scale-125 z-0">
            </div>

            <div class="relative z-10 h-full flex flex-col justify-between">
                <div>
                    <span
                        class="px-4 py-1 bg-purple-200 text-purple-700 rounded-full text-xl font-bold shadow-sm mb-6 inline-block">BEST
                        Popular</span>
                    <h2 class="text-6xl font-bold text-gray-700 mb-2 group-hover:text-purple-600 transition-colors">
                        {{ featured_product.title }}
                    </h2>
                    <p class="text-3xl text-gray-500 font-hand leading-tight">
                        {{ featured_product.description|truncatechars:60 }}
                    </p>
                </div>

                <div class="flex justify-between items-end mt-8">
                    <div class="text-8xl float-icon">
                        {% if "ìœ·ë†€ì´" in featured_product.title %}ğŸ²{% else %}ğŸ› ï¸{% endif %}
                    </div>
                    <button
                        class="w-16 h-16 rounded-full bg-purple-500 text-white shadow-lg flex items-center justify-center text-3xl group-hover:rotate-45 transition-transform duration-300">
                        <i class="fa-solid fa-arrow-right"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- 2. [Wide Card] Prompt Lab -->
        <div class="col-span-4 md:col-span-2 clay-card p-10 relative overflow-hidden group cursor-pointer bg-[#E0E5EC]"
            onclick="location.href='{{ prompt_lab_url }}'" data-aos="fade-up" data-aos-delay="200">
            <div class="flex items-center justify-between h-full relative z-10">
                <div>
                    <div class="flex items-center gap-3 mb-2">
                        <i class="fa-solid fa-wand-magic-sparkles text-purple-500 text-3xl"></i>
                        <h3 class="text-4xl font-bold text-gray-700 mt-1">AI í”„ë¡¬í”„íŠ¸ ë ˆì‹œí”¼</h3>
                    </div>
                    <p class="text-2xl text-gray-500 font-hand leading-tight">ìƒê¸°ë¶€, ê°€ì •í†µì‹ ë¬¸, ìˆ˜ì—…ì§€ë„ì•ˆ...<br>ë³µì‚¬í•´ì„œ ë°”ë¡œ ì“°ëŠ” ê²€ì¦ëœ
                        ì£¼ë¬¸ì„œ.</p>
                </div>
                <div
                    class="text-7xl text-purple-200/50 group-hover:text-purple-300/50 transition-colors absolute right-0 bottom-0">
                    <i class="fa-solid fa-scroll"></i>
                </div>
            </div>
        </div>

        <!-- 3. [Square] PlayAura -->
        <div class="col-span-2 md:col-span-1 clay-card p-8 flex flex-col justify-between group cursor-pointer hover:bg-red-50 transition-colors"
            onclick="showServiceModal('playaura')" data-aos="fade-up" data-aos-delay="300">
            <div
                class="w-16 h-16 rounded-3xl bg-red-100 flex items-center justify-center text-red-500 text-3xl mb-4 shadow-sm">
                <i class="fa-brands fa-youtube"></i>
            </div>
            <div>
                <h3 class="text-3xl font-bold text-gray-700 mb-1">PlayAura</h3>
                <p class="text-xl text-gray-500 leading-tight">ì „ì„¸ê³„ ì¸ê¸° ì˜ìƒ íƒí—˜</p>
            </div>
        </div>

        <!-- 4. [Square] Schoolit -->
        <div class="col-span-2 md:col-span-1 clay-card p-8 flex flex-col justify-between group cursor-pointer hover:bg-orange-50 transition-colors"
            onclick="showServiceModal('schoolit')" data-aos="fade-up" data-aos-delay="400">
            <div
                class="w-16 h-16 rounded-3xl bg-orange-100 flex items-center justify-center text-orange-500 text-3xl mb-4 shadow-sm">
                <i class="fa-solid fa-school"></i>
            </div>
            <div>
                <h3 class="text-3xl font-bold text-gray-700 mb-1">ìŠ¤ì¿¨ì‡</h3>
                <p class="text-xl text-gray-500 leading-tight">êµìœ¡ ê³µë™ì²´ í”Œë«í¼</p>
            </div>
        </div>

        <!-- Insight Library Square -->
        <div class="col-span-2 md:col-span-1 clay-card p-8 flex flex-col justify-between group cursor-pointer hover:bg-purple-50 transition-colors"
            data-url="{% url 'insight_list' %}" onclick="location.href=this.dataset.url;" data-aos="fade-up"
            data-aos-delay="450">
            <div
                class="w-16 h-16 rounded-3xl bg-purple-100 flex items-center justify-center text-purple-500 text-3xl mb-4 shadow-sm">
                <i class="fa-solid fa-gem"></i>
            </div>
            <div>
                <h3 class="text-3xl font-bold text-gray-700 mb-1">ì¸ì‚¬ì´íŠ¸</h3>
                <p class="text-xl text-gray-500 leading-tight">ì˜ê° ë³´ì„í•¨</p>
            </div>
        </div>

        <!-- 5. [Tall Card] AI Tools Guide -->
        <div class="col-span-2 md:col-span-1 row-span-2 clay-card p-8 bg-gray-800 text-white group cursor-pointer relative overflow-hidden"
            onclick="location.href='{{ tool_guide_url }}'" data-aos="fade-up" data-aos-delay="500">
            <div
                class="absolute top-0 right-0 p-4 opacity-10 text-9xl group-hover:rotate-12 transition-transform duration-500">
                <i class="fa-solid fa-robot"></i>
            </div>
            <div class="relative z-10 flex flex-col h-full justify-between">
                <div>
                    <span class="text-blue-300 font-bold text-lg tracking-wider uppercase mb-2 block">Edu-Tech
                        Guide</span>
                    <h3 class="text-5xl font-bold mb-4 leading-tight mt-2">AI ë„êµ¬<br>ê°€ì´ë“œ</h3>
                    <p class="text-gray-400 text-2xl leading-tight">ìƒí™©ë³„ë¡œ ë”± ë§ëŠ”<br>AI ë„êµ¬ë¥¼<br>ì¶”ì²œí•´ë“œë ¤ìš”.</p>
                </div>
                <div class="mt-4">
                    <span
                        class="inline-block border border-gray-600 rounded-full px-5 py-2 text-lg hover:bg-gray-700 transition-colors">
                        ë³´ëŸ¬ê°€ê¸° &rarr;
                    </span>
                </div>
            </div>
        </div>

        <!-- 6. [List Card] Other Tools (Dynamic Loop) -->
        <div class="col-span-4 md:col-span-3 clay-card p-8 bg-[#E0E5EC]" data-aos="fade-up" data-aos-delay="600">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-3xl font-bold text-gray-700"><i class="fa-solid fa-layer-group mr-2 text-blue-500"></i>
                    ìœ ìš©í•œ ë„êµ¬ë“¤</h3>
                <span class="text-xl text-gray-400">Total {{ products|length }} Tools</span>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
                {% for product in products %}
                {% if "ìœ·ë†€ì´" not in product.title %}
                {% url "product_detail" product.pk as target_url %}
                <div class="flex items-center gap-4 p-4 rounded-3xl bg-white/40 hover:bg-white/80 transition-all shadow-sm hover:shadow-md cursor-pointer group"
                    onclick="location.href='{{ target_url }}'">
                    <div class="w-12 h-12 rounded-full bg-white shadow-clay-inner flex items-center justify-center text-xl shrink-0 
                                {% if 'ë‚˜ì´ìŠ¤' in product.title %}text-blue-400
                                {% elif 'ìë¦¬' in product.title %}text-green-400
                                {% elif 'í•™ê¸‰ë¹„' in product.title %}text-pink-400
                                {% elif 'ë¬¸ì„œ' in product.title %}text-orange-400
                                {% elif 'ìˆ˜ì—…' in product.title %}text-purple-400
                                {% else %}text-gray-400{% endif %}">

                        {% if 'ë‚˜ì´ìŠ¤' in product.title %}<i class="fa-solid fa-feather"></i>
                        {% elif 'ìë¦¬' in product.title %}<i class="fa-solid fa-users"></i>
                        {% elif 'í•™ê¸‰ë¹„' in product.title %}<i class="fa-solid fa-piggy-bank"></i>
                        {% elif 'ë¬¸ì„œ' in product.title %}<i class="fa-solid fa-file-pdf"></i>
                        {% elif 'ìˆ˜ì—…' in product.title %}<i class="fa-solid fa-chalkboard-user"></i>
                        {% else %}<i class="fa-solid fa-cube"></i>{% endif %}
                    </div>
                    <div class="overflow-hidden">
                        <h4 class="font-bold text-2xl text-gray-700 truncate -mb-1 mt-1 group-hover:text-purple-600">{{
                            product.title }}</h4>
                        <p class="text-lg text-gray-500 truncate">{{ product.description|truncatechars:18 }}</p>
                    </div>
                </div>
                {% endif %}
                {% endfor %}

                <!-- Coming Soon Placeholder -->
                <div
                    class="flex items-center gap-4 p-4 rounded-3xl border-2 border-dashed border-gray-300 text-gray-400">
                    <div
                        class="w-12 h-12 rounded-full bg-transparent border-2 border-gray-300 flex items-center justify-center text-xl">
                        <i class="fa-solid fa-plus"></i>
                    </div>
                    <span class="text-xl font-bold mt-1">New Tool Coming Soon</span>
                </div>
            </div>
        </div>

        <!-- 7. [Info Card] Why Eduitit? -->
        <div class="col-span-4 md:col-span-2 clay-card p-8 bg-gradient-to-br from-blue-50 to-purple-50"
            data-aos="fade-up" data-aos-delay="700">
            <h3 class="text-3xl font-bold text-gray-700 mb-6">ì™œ EDUITITì¸ê°€ìš”?</h3>
            <div class="grid grid-cols-2 gap-4">
                <div class="flex items-center gap-3">
                    <i class="fa-solid fa-check-circle text-green-500 text-2xl"></i>
                    <span class="text-gray-600 font-bold text-2xl pt-1">100% ë¬´ë£Œ</span>
                </div>
                <div class="flex items-center gap-3">
                    <i class="fa-solid fa-bolt text-yellow-500 text-2xl"></i>
                    <span class="text-gray-600 font-bold text-2xl pt-1">ì„¤ì¹˜ ë¶ˆí•„ìš”</span>
                </div>
                <div class="flex items-center gap-3">
                    <i class="fa-solid fa-user-shield text-purple-500 text-2xl"></i>
                    <span class="text-gray-600 font-bold text-2xl pt-1">ë¡œê·¸ì¸ ë¶ˆí•„ìš”</span>
                </div>
                <div class="flex items-center gap-3">
                    <i class="fa-solid fa-heart text-pink-500 text-2xl"></i>
                    <span class="text-gray-600 font-bold text-2xl pt-1">í˜„ì§ êµì‚¬ ì œì‘</span>
                </div>
            </div>
        </div>

        <!-- 8. [Contact Card] Feedback -->
        <div class="col-span-4 md:col-span-2 clay-card p-8 flex items-center justify-between group bg-[#E0E5EC]"
            data-aos="fade-up" data-aos-delay="800">
            <div>
                <h3 class="text-3xl font-bold text-gray-700 mb-1">ì•„ì´ë””ì–´ ì œì•ˆí•˜ê¸°</h3>
                <p class="text-gray-500 font-hand text-2xl">ì„ ìƒë‹˜ê»˜ í•„ìš”í•œ ë„êµ¬ë¥¼ ë§Œë“¤ì–´ë“œë ¤ìš”.</p>
            </div>
            <a href="mailto:kakio@naver.com"
                class="clay-card px-8 py-3 text-purple-600 font-bold text-2xl hover:text-purple-700 transition-all flex items-center gap-2 shadow-clay hover:shadow-clay-hover">
                <i class="fa-regular fa-envelope"></i> <span class="hidden sm:inline">ë³´ë‚´ê¸°</span>
            </a>
        </div>

    </div> <!-- End Bento Grid -->
</main>

<!-- Service Modal -->
<div id="serviceModal"
    class="fixed inset-0 bg-black/40 hidden items-center justify-center z-50 p-4 backdrop-blur-sm transition-all duration-300 opacity-0"
    onclick="if(event.target === this) closeServiceModal();">
    <div class="clay-card p-10 max-w-lg w-full mx-auto relative transform scale-95 transition-all duration-300 bg-[#E0E5EC]"
        id="modalPanel">
        <button onclick="closeServiceModal()"
            class="absolute top-6 right-6 text-gray-400 hover:text-gray-600 text-3xl w-12 h-12 flex items-center justify-center rounded-full hover:bg-gray-200 transition shadow-clay-inner">
            <i class="fa-solid fa-xmark"></i>
        </button>
        <div id="modalContent" class="text-center">
            <!-- Content Injected via JS -->
        </div>
    </div>
</div>

<script>
    const serviceData = {
        yut: {
            icon: 'fa-solid fa-gamepad',
            iconColor: 'text-green-500',
            bgColor: 'bg-green-100',
            title: 'ì˜¨ë¼ì¸ ìœ·ë†€ì´',
            features: [
                'ğŸ² ì„¤ì¹˜ ì—†ì´ ë¸Œë¼ìš°ì €ì—ì„œ ë°”ë¡œ í”Œë ˆì´!',
                'ğŸ‘¥ 2~4íŒ€ ëŒ€í•­ì „ ê°€ëŠ¥',
                'ğŸ¯ ì‹¤ì‹œê°„ ìœ· ë˜ì§€ê¸° ì• ë‹ˆë©”ì´ì…˜',
                'ğŸ‰ í•™ê¸‰ ë ˆí¬ë ˆì´ì…˜ì— ë”±!'
            ],
            buttonText: 'ê²Œì„í•˜ê¸°',
            buttonColor: 'bg-green-500 text-white shadow-lg hover:bg-green-600',
            url: '{{ yut_url }}',
            isExternal: false
        },
        playaura: {
            icon: 'fa-brands fa-youtube',
            iconColor: 'text-red-500',
            bgColor: 'bg-red-100',
            title: 'PlayAura',
            features: [
                'ğŸŒ ë‚´ ì•Œê³ ë¦¬ì¦˜ì—ì„œ ë²—ì–´ë‚˜ ì „ì„¸ê³„ ì¸ê¸° ì˜ìƒ ë°œê²¬!',
                'ğŸ—ºï¸ êµ­ê°€ë³„ íŠ¸ë Œë”© ì˜ìƒ íƒìƒ‰',
                'ğŸ” ìƒˆë¡œìš´ ì½˜í…ì¸  ë°œêµ´',
                'ğŸš€ YouTube ì•Œê³ ë¦¬ì¦˜ íƒˆì¶œ!'
            ],
            buttonText: 'íƒí—˜í•˜ê¸°',
            buttonColor: 'bg-red-500 text-white shadow-lg hover:bg-red-600',
            url: 'https://motube-woad.vercel.app/',
            isExternal: true
        },
        schoolit: {
            icon: 'fa-solid fa-school',
            iconColor: 'text-orange-500',
            bgColor: 'bg-orange-100',
            title: 'ìŠ¤ì¿¨ì‡',
            features: [
                'ğŸ¢ êµì‚¬Â·í•™êµÂ·êµìœ¡í–‰ì‚¬ì—…ì²´ ì—°ê²° í”Œë«í¼',
                'ğŸ’¼ ê°•ì‚¬Â·ê¸°ê°„ì œÂ·êµì‚¬Â·í•™êµÂ·ì—…ì²´ ëª¨ë‘ë¥¼ ìœ„í•œ ê³µê°„',
                'ğŸ¤– ì±„ìš© ë° í–‰ì‚¬ ê´€ë ¨ ê¶ê¸ˆì¦ì€ AIì—ê²Œ ì§ˆë¬¸!',
                'ğŸ’¬ êµìœ¡ ê³µë™ì²´ êµ¬ì„±ì›ë“¤ì˜ ì •ë³´ ê³µìœ  ì»¤ë®¤ë‹ˆí‹°'
            ],
            buttonText: 'ë°©ë¬¸í•˜ê¸°',
            buttonColor: 'bg-orange-500 text-white shadow-lg hover:bg-orange-600',
            url: 'https://schoolit.shop/',
            isExternal: true
        }
    };

    function showServiceModal(serviceKey) {
        const service = serviceData[serviceKey];
        if (!service) return;

        const featuresHtml = service.features.map(f => `<li class="text-left py-2 px-6 bg-gray-100/50 rounded-2xl text-xl text-gray-600 mb-2 shadow-clay-inner">${f}</li>`).join('');

        document.getElementById('modalContent').innerHTML = `
                <div class="w-28 h-28 rounded-3xl shadow-clay-inner mb-8 flex items-center justify-center text-6xl ${service.iconColor} ${service.bgColor} mx-auto">
                    <i class="${service.icon}"></i>
                </div>
                <h3 class="text-5xl font-bold mb-6 text-gray-700">${service.title}</h3>
                <ul class="font-hand text-2xl mb-10">
                    ${featuresHtml}
                </ul>
                <button onclick="goToService('${serviceKey}')" 
                    class="w-full py-5 rounded-2xl font-bold text-3xl transition-all transform hover:scale-105 ${service.buttonColor}">
                    ${service.buttonText} <i class="fa-solid fa-arrow-right ml-2"></i>
                </button>
            `;

        const modal = document.getElementById('serviceModal');
        const panel = document.getElementById('modalPanel');

        modal.classList.remove('hidden');
        // Small delay to allow display:flex to apply before opacity transition
        setTimeout(() => {
            modal.classList.remove('opacity-0');
            modal.classList.add('flex');
            panel.classList.remove('scale-95');
            panel.classList.add('scale-100');
        }, 10);

        document.body.style.overflow = 'hidden';
    }

    function closeServiceModal() {
        const modal = document.getElementById('serviceModal');
        const panel = document.getElementById('modalPanel');

        modal.classList.add('opacity-0');
        panel.classList.remove('scale-100');
        panel.classList.add('scale-95');

        setTimeout(() => {
            modal.classList.add('hidden');
            modal.classList.remove('flex');
            document.body.style.overflow = 'auto';
        }, 300);
    }

    function goToService(serviceKey) {
        const service = serviceData[serviceKey];
        if (service.isExternal) {
            window.open(service.url, '_blank');
        } else {
            location.href = service.url;
        }
        closeServiceModal();
    }
</script>
{% endblock %}