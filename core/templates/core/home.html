{% extends 'base.html' %}

{% block title %}Eduitit - ì„ ìƒë‹˜ì˜ ìŠ¤ë§ˆíŠ¸í•œ í•˜ë£¨{% endblock %}

{% block content %}
<!-- URL Definitions -->
{% url 'yut_game' as yut_url %}
{% url 'prompt_lab' as prompt_lab_url %}
{% url 'tool_guide' as tool_guide_url %}

<main class="pt-24 md:pt-32 pb-12 px-4 md:px-8 max-w-7xl mx-auto">

    <!-- Header / Hero Section -->
    <div class="flex flex-col justify-center text-center mb-16 md:mb-24" data-aos="fade-up">
        <h1 class="text-5xl md:text-7xl font-extrabold text-gray-800 tracking-tight leading-tight mb-6">
            ì„ ìƒë‹˜ì˜ <span class="text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600">ìŠ¤ë§ˆíŠ¸í•œ
                í•˜ë£¨</span>ë¥¼ ìœ„í•´
        </h1>
        <p class="text-xl md:text-2xl text-gray-500 max-w-3xl mx-auto leading-relaxed break-keep font-bold">
            AIë¡œ ë” ë˜‘ë˜‘í•˜ê²Œ, ë” ì¦ê²ê²Œ. ìˆ˜ì—… ì¤€ë¹„ë¶€í„° í–‰ì • ì—…ë¬´ê¹Œì§€<br class="hidden md:block">
            í˜„ì§ êµì‚¬ì˜ ê³ ë¯¼ì„ ë‹´ì€ AI ë„êµ¬ë“¤ì„ ë§Œë‚˜ë³´ì„¸ìš”.
        </p>
    </div>

    <!-- BENTO GRID -->
    <div class="bento-grid">
        <!-- 1. Featured Hero Card -->
        {% if featured_product %}
        {% include 'core/includes/card_product.html' with product=featured_product delay='100' %}
        {% endif %}

        <!-- 2. Dynamic Product Cards -->
        {% for product in products %}
        {% if product.id != featured_product.id %}
        {% include 'core/includes/card_product.html' with product=product delay='200' %}
        {% endif %}
        {% endfor %}

        <!-- 7. Why Eduitit? (System Card) -->
        <div class="md:col-span-2 clay-card p-8 h-full bg-slate-900 text-white border-none shadow-xl relative overflow-hidden"
            data-aos="fade-up" data-aos-delay="500">
            <h3 class="text-2xl font-bold mb-6 flex items-center gap-3">
                <span class="w-8 h-8 rounded-lg bg-indigo-500 flex items-center justify-center text-sm"><i
                        class="fa-solid fa-sparkles"></i></span>
                EDUITITë§Œì˜ íŠ¹ë³„í•¨
            </h3>
            <div class="grid grid-cols-2 gap-6 relative z-10">
                <div class="space-y-1">
                    <div class="flex items-center gap-2 text-indigo-400 font-bold"><i class="fa-solid fa-check"></i>
                        <span class="text-sm uppercase tracking-wider">Free Access</span>
                    </div>
                    <p class="text-lg font-bold">100% ë¬´ë£Œ ë„êµ¬</p>
                </div>
                <div class="space-y-1">
                    <div class="flex items-center gap-2 text-blue-400 font-bold"><i class="fa-solid fa-check"></i> <span
                            class="text-sm uppercase tracking-wider">Web Based</span></div>
                    <p class="text-lg font-bold">ë¬´ì„¤ì¹˜ ì§€ì›</p>
                </div>
                <div class="space-y-1">
                    <div class="flex items-center gap-2 text-emerald-400 font-bold"><i class="fa-solid fa-check"></i>
                        <span class="text-sm uppercase tracking-wider">Smart AI</span>
                    </div>
                    <p class="text-lg font-bold">ìµœì‹  AI ê¸°ìˆ  ê²°í•©</p>
                </div>
                <div class="space-y-1">
                    <div class="flex items-center gap-2 text-orange-400 font-bold"><i class="fa-solid fa-check"></i>
                        <span class="text-sm uppercase tracking-wider">Teacher Made</span>
                    </div>
                    <p class="text-lg font-bold">í˜„ì§ êµì‚¬ê°€ ì œì‘</p>
                </div>
            </div>

            <!-- Decor -->
            <div
                class="absolute -right-10 -bottom-10 w-40 h-40 bg-purple-500/20 rounded-full blur-3xl pointer-events-none">
            </div>
        </div>

        <!-- 8. Feedback (Action Card) -->
        <div class="md:col-span-2 clay-card p-8 h-full flex flex-col md:flex-row items-center justify-between gap-6 bg-white/40 backdrop-blur-md relative overflow-hidden"
            data-aos="fade-up" data-aos-delay="600">
            <div>
                <h3 class="text-2xl font-bold text-gray-800 mb-1">ìƒˆë¡œìš´ ë„êµ¬ ì œì•ˆ</h3>
                <p class="text-gray-500 font-hand text-xl">ì„ ìƒë‹˜ì˜ ìŠ¤ë§ˆíŠ¸í•œ êµì‹¤ì„ ìœ„í•œ ì•„ì´ë””ì–´ë¥¼ ê¸°ë‹¤ë ¤ìš”.</p>
            </div>
            <a href="mailto:kakio@naver.com"
                class="px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold text-lg hover:bg-slate-800 transition-all flex items-center gap-3 shadow-lg hover:-translate-y-1 relative z-10">
                <i class="fa-solid fa-paper-plane text-sm"></i> ì˜ê²¬ ë³´ë‚´ê¸°
            </a>
            <div
                class="absolute -right-10 -bottom-10 w-40 h-40 bg-indigo-200/50 rounded-full blur-3xl pointer-events-none">
            </div>
        </div>

    </div> <!-- End Bento Grid -->
</main>

<!-- API Notice Modal -->
<div id="apiNoticeModal" class="fixed inset-0 z-[9999] hidden overflow-y-auto" aria-labelledby="modal-title"
    role="dialog" aria-modal="true">
    <div class="fixed inset-0 z-10 overflow-y-auto">
        <div class="flex min-h-full items-start justify-center p-4 text-center pt-10 pb-40">
            <!-- Backdrop -->
            <div class="fixed inset-0 bg-slate-900/80 backdrop-blur-sm transition-opacity" onclick="closeNotice()"
                aria-hidden="true"></div>

            <!-- Fixed Close Button - ALWAYS visible on screen, not inside modal -->
            <button onclick="closeNotice()"
                class="fixed top-6 right-6 z-[10000] w-14 h-14 rounded-full bg-slate-800 text-white shadow-2xl flex items-center justify-center hover:bg-black transition-all"
                aria-label="ì°½ ë‹«ê¸°">
                <i class="fa-solid fa-xmark text-2xl"></i>
            </button>

            <!-- Modal Panel -->
            <div
                class="relative transform rounded-3xl bg-white text-left shadow-2xl transition-all w-full max-w-2xl border-none clay-card z-10">
                <div class="p-6 md:p-10">
                    <h2 class="text-2xl md:text-4xl font-extrabold text-gray-800 mb-6 flex items-center gap-3 pr-10">
                        <span class="text-indigo-600">ğŸ“¢</span> Gemini AI ë°©ì‹ ë³€ê²½ ì•ˆë‚´
                    </h2>

                    <div class="space-y-4 text-gray-600 text-base md:text-lg leading-relaxed break-keep">
                        <p class="font-bold text-gray-800">ì•ˆë…•í•˜ì„¸ìš”, ì„ ìƒë‹˜! Eduititì…ë‹ˆë‹¤.</p>
                        <p>
                            êµ¬ê¸€ ì •ì±… ë³€ê²½ìœ¼ë¡œ ê³µìš© API ì‚¬ìš©ì´ ë§¤ìš° ì–´ë µê²Œ ë˜ì–´, ë¶€ë“ì´í•˜ê²Œ **ê°œì¸ API í‚¤ ë“±ë¡** ë°©ì‹ìœ¼ë¡œ ì „í™˜í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
                        </p>

                        <div class="bg-indigo-50 border-l-4 border-indigo-500 p-4 rounded-r-2xl my-6 space-y-2">
                            <p class="flex items-start gap-2">
                                <i class="fa-solid fa-circle-check text-indigo-600 mt-1 shrink-0"></i>
                                <span>ê°€ì… í›„ **[ì„¤ì •]**ì—ì„œ ë²ˆê±°ë¡œìš°ì‹œë”ë¼ë„ **ê°œì¸ Gemini API í‚¤**ë¥¼ ë”± í•œ ë²ˆë§Œ ë“±ë¡í•´ ì£¼ì„¸ìš”.</span>
                            </p>
                            <p class="flex items-start gap-2">
                                <i class="fa-solid fa-circle-check text-indigo-600 mt-1 shrink-0"></i>
                                <span>ê°œì¸ í‚¤ë¥¼ ì“°ì‹œë©´ **ë¬´ë£Œì´ë©´ì„œë„ í›¨ì”¬ ë¹ ë¥´ê³  ëŠê¹€ ì—†ì´** ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤! ğŸ˜Š</span>
                            </p>
                        </div>

                        <a href="https://aistudio.google.com/app/apikey" target="_blank"
                            class="block p-4 bg-slate-100 rounded-xl border border-slate-200 hover:bg-slate-200 transition-colors">
                            <p class="text-base font-bold text-slate-700 mb-1">ğŸ”‘ 1ë¶„ ë§Œì— ë¬´ë£Œ API í‚¤ ë°œê¸‰ë°›ê¸°</p>
                            <p class="text-sm text-indigo-600 font-bold">ì—¬ê¸°ë¥¼ ëˆŒëŸ¬ ê°€ì´ë“œë¥¼ í™•ì¸í•´ ë³´ì„¸ìš” <i
                                    class="fa-solid fa-arrow-up-right-from-square text-xs"></i></p>
                        </a>
                    </div>

                    <!-- Action Buttons - Reordered for Mobile -->
                    <div class="mt-8 flex flex-col gap-3">
                        <button onclick="closeNotice()"
                            class="w-full py-5 bg-gray-200 text-gray-800 rounded-2xl font-black text-xl hover:bg-gray-300 transition-all">
                            ë‹«ê¸° (ì°½ ë‹«ê¸°)
                        </button>
                        <a href="{% url 'settings' %}"
                            class="w-full py-5 bg-indigo-600 text-white rounded-2xl font-black text-xl hover:bg-slate-800 transition-all text-center shadow-lg">
                            ì§€ê¸ˆ API í‚¤ ë“±ë¡í•˜ëŸ¬ ê°€ê¸°
                        </a>
                    </div>

                    <div class="mt-6 flex justify-center">
                        <label for="dontShowToday"
                            class="flex items-center gap-3 py-3 px-4 cursor-pointer select-none text-gray-500 bg-gray-50 rounded-xl border border-gray-100">
                            <input type="checkbox" id="dontShowToday"
                                class="w-6 h-6 rounded border-gray-300 text-indigo-600">
                            <span class="text-sm font-bold">ì˜¤ëŠ˜ í•˜ë£¨ ë‹¤ì‹œ ë³´ì§€ ì•Šê¸°</span>
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Accent Decor -->
    <div class="absolute -right-10 -top-10 w-32 h-32 bg-indigo-500/10 rounded-full blur-2xl pointer-events-none">
    </div>
</div>
</div>
</div>

<script>
    function closeNotice() {
        const modal = document.getElementById('apiNoticeModal');
        const dontShow = document.getElementById('dontShowToday').checked;

        if (dontShow) {
            const expiry = new Date().getTime() + (24 * 60 * 60 * 1000); // 24 hours
            localStorage.setItem('api_notice_hide_until', expiry);
        }

        modal.classList.add('hidden');
        modal.classList.remove('flex');
    }

    document.addEventListener('DOMContentLoaded', () => {
        // Modal Logic
        const hideUntil = localStorage.getItem('api_notice_hide_until');
        const now = new Date().getTime();

        if (!hideUntil || now > parseInt(hideUntil)) {
            setTimeout(() => {
                const modal = document.getElementById('apiNoticeModal');
                modal.classList.remove('hidden');
                modal.classList.add('flex');
            }, 800);
        }

        // Product Cards Logic
        document.querySelectorAll('.product-card').forEach(card => {
            card.addEventListener('click', () => {
                const id = card.getAttribute('data-product-id');
                if (window.openModal) window.openModal(id);
            });

            card.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    card.click();
                }
            });
        });
    });
</script>
{% endblock %}